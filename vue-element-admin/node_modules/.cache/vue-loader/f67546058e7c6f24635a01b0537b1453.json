{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/department/saveDepartment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/department/saveDepartment.vue","mtime":1608726456330},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkZXBhcnRtZW50IGZyb20gIkAvYXBpL2RlcGFydG1lbnQiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZXBhcnRtZW50OiB7fSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAogICAgICBCQVNFX0FQSTogcHJvY2Vzcy5lbnYuQkFTRV9BUEksIC8v6I635Y+WZGV2LmVudi5qc+S4reeahEJBU0VfQVBJCiAgICAgIHJ1bGU6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35aGr5YaZ6YOo6Zeo5ZCN56ewIiwgdHJpZ2dlcjogImNoYW5nZSIgfSwKICAgICAgICBdLAogICAgICB9LAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIHdhdGNoOiB7CiAgICAvL+ebkeWQrAogICAgJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIC8v6Lev55Sx5Y+R55Sf5Y+Y5YyWIOaWueazleWwseS8muaJp+ihjAogICAgICB0aGlzLmluaXQoKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WIneWni+WMlgogICAgaW5pdCgpIHsKICAgICAgLy/liKTmlq3ot6/lvoTkuK3mmK/lkKbmnIlpZOWAvAogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIGNvbnN0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIHRoaXMuZ2V0RGVwYXJ0bWVudEJ5SWQoaWQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5riF56m66KGo5Y2VCiAgICAgICAgdGhpcy5kZXBhcnRtZW50ID0ge307CiAgICAgIH0KICAgIH0sCiAgICAvL+S/ruaUuQogICAgdXBkYXRlRGVwYXJ0bWVudCgpIHsKICAgICAgZGVwYXJ0bWVudC51cGRhdGVEZXBhcnRtZW50KHRoaXMuZGVwYXJ0bWVudCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnmiJDlip8hIiwKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvZGVwYXJ0bWVudC9saXN0RGVwYXJ0bWVudCIgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5qC55o2uaWTmn6Xor6IKICAgIGdldERlcGFydG1lbnRCeUlkKGlkKSB7CiAgICAgIGRlcGFydG1lbnQKICAgICAgICAuZ2V0RGVwYXJ0bWVudEJ5SWQoaWQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmRlcGFydG1lbnQgPSByZXNwb25zZS5kYXRhLmRlcGFydG1lbnQ7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy/liKTmlq3mmK/kv67mlLnov5jmmK/mt7vliqAKICAgICAgICAgIC8v5Yik5pat6Lev5b6E5Lit5piv5ZCm5pyJaWQKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIC8v5L+u5pS5CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGVwYXJ0bWVudCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy/mt7vliqAKICAgICAgICAgICAgdGhpcy5zYXZlRGVwYXJ0bWVudCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/mt7vliqAKICAgIHNhdmVEZXBhcnRtZW50KCkgewogICAgICBkZXBhcnRtZW50CiAgICAgICAgLmFkZERlcGFydG1lbnQodGhpcy5kZXBhcnRtZW50KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgLy/mt7vliqDmiJDlip8KICAgICAgICAgIC8v5o+Q56S65L+h5oGvCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfIiwKICAgICAgICAgIH0pOwogICAgICAgICAgLy/lm57liLDliJfooagg6Lev55Sx6Lez6L2sKOmHjeWumuWQkSkKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9kZXBhcnRtZW50L2xpc3REZXBhcnRtZW50IiB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIC8v5o+Q56S65L+h5oGvCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5aSx6LSlIiwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["saveDepartment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"saveDepartment.vue","sourceRoot":"src/views/department","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form\n      :model=\"department\"\n      ref=\"department\"\n      :rules=\"rule\"\n      label-width=\"120px\"\n    >\n      <el-form-item label=\"部门id\">\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"department.id\" />\n      </el-form-item>\n      <el-form-item prop=\"name\" label=\"部门名称\">\n        <el-input maxlength=\"10\" show-word-limit v-model=\"department.name\" />\n      </el-form-item>\n      <el-form-item label=\"备注\">\n        <el-input v-model=\"department.note\" />\n      </el-form-item>\n\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate('department')\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport department from \"@/api/department\";\n\nexport default {\n  data() {\n    return {\n      department: {},\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      BASE_API: process.env.BASE_API, //获取dev.env.js中的BASE_API\n      rule: {\n        name: [\n          { required: true, message: \"请填写部门名称\", trigger: \"change\" },\n        ],\n      },\n    };\n  },\n  created() {\n    this.init();\n  },\n  watch: {\n    //监听\n    $route(to, from) {\n      //路由发生变化 方法就会执行\n      this.init();\n    },\n  },\n  methods: {\n    //初始化\n    init() {\n      //判断路径中是否有id值\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id;\n        this.getDepartmentById(id);\n      } else {\n        //清空表单\n        this.department = {};\n      }\n    },\n    //修改\n    updateDepartment() {\n      department.updateDepartment(this.department).then((response) => {\n        this.$message({\n          type: \"success\",\n          message: \"修改成功!\",\n        });\n        this.$router.push({ path: \"/department/listDepartment\" });\n      });\n    },\n    //根据id查询\n    getDepartmentById(id) {\n      department\n        .getDepartmentById(id)\n        .then((response) => {\n          this.department = response.data.department;\n        })\n        .catch((error) => {});\n    },\n    saveOrUpdate(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          //判断是修改还是添加\n          //判断路径中是否有id\n          if (this.$route.params && this.$route.params.id) {\n            //修改\n            this.updateDepartment();\n          } else {\n            //添加\n            this.saveDepartment();\n          }\n        }\n      });\n    },\n    //添加\n    saveDepartment() {\n      department\n        .addDepartment(this.department)\n        .then((response) => {\n          //添加成功\n          //提示信息\n          this.$message({\n            type: \"success\",\n            message: \"添加成功\",\n          });\n          //回到列表 路由跳转(重定向)\n          this.$router.push({ path: \"/department/listDepartment\" });\n        })\n        .catch((error) => {\n          //提示信息\n          this.$message({\n            type: \"warning\",\n            message: \"添加失败\",\n          });\n        });\n    },\n  },\n};\n</script>\n\n"]}]}