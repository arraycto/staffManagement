{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/attendance/saveAttendance.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/attendance/saveAttendance.vue","mtime":1608726456323},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhdHRlbmRhbmNlIGZyb20gIkAvYXBpL2F0dGVuZGFuY2UiOwppbXBvcnQgZGVwYXJ0bWVudCBmcm9tICJAL2FwaS9kZXBhcnRtZW50IjsKaW1wb3J0IGNsZXJrIGZyb20gIkAvYXBpL2NsZXJrIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhdHRlbmRhbmNlOiB7CiAgICAgICAgY2xlcmtJZDonJywKICAgICAgICBkZXBhcnRtZW50SWQ6JycKICAgICAgfSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAogICAgICBkZXBhcnRtZW50TGlzdDogW10sCiAgICAgIGltYWdlY3JvcHBlcktleTogMCwgLy/kuIrkvKDnu4Tku7bnmoRrZXnlgLwKICAgICAgY2xlcmtMaXN0OiBbXSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICB3YXRjaDogewogICAgLy/nm5HlkKwKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICAvL+i3r+eUseWPkeeUn+WPmOWMliDmlrnms5XlsLHkvJrmiafooYwKICAgICAgdGhpcy5pbml0KCk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgaW5pdENsZXJrKCkgewogICAgICBjbGVyay5nZXRDbGVya0xpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuY2xlcmtMaXN0ID0gcmVzcG9uc2UuZGF0YS5jbGVya0xpc3Q7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdENsZXJrKCkgewogICAgICB0aGlzLmF0dGVuZGFuY2UuY2xlcmtJZCA9ICcnOwogICAgICBjbGVyawogICAgICAgIC5nZXRDbGVya0J5RGVwYXJ0bWVudElkKHRoaXMuYXR0ZW5kYW5jZS5kZXBhcnRtZW50SWQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmNsZXJrTGlzdCA9IHJlc3BvbnNlLmRhdGEuY2xlcmtMaXN0OwogICAgICAgIH0pOwogICAgfSwKICAgIC8v5Yid5aeL5YyWCiAgICBpbml0KCkgewogICAgICAvL+WIpOaWrei3r+W+hOS4reaYr+WQpuaciWlk5YC8CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgY29uc3QgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgdGhpcy5nZXRBdHRlbmRhbmNlQnlJZChpZCk7CiAgICAgICAgdGhpcy5pbml0Q2xlcmsoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvL+a4heepuuihqOWNlQogICAgICAgIHRoaXMuYXR0ZW5kYW5jZSA9IHt9OwogICAgICB9CiAgICAgIHRoaXMuaW5pdERlcGFydG1lbnQoKTsKICAgIH0sCiAgICAvL+afpeivoumDqOmXqAogICAgaW5pdERlcGFydG1lbnQoKSB7CiAgICAgIGRlcGFydG1lbnQuZ2V0RGVwYXJ0bWVudExpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuZGVwYXJ0bWVudExpc3QgPSByZXNwb25zZS5kYXRhLmRlcGFydG1lbnRMaXN0OwogICAgICB9KTsKICAgICAgCiAgICB9LAogICAgLy/kv67mlLkKICAgIHVwZGF0ZUF0dGVuZGFuY2UoKSB7CiAgICAgIGF0dGVuZGFuY2UKICAgICAgICAudXBkYXRlQXR0ZW5kYW5jZSh0aGlzLmF0dGVuZGFuY2UpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfISIsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogIi9hdHRlbmRhbmNlIiwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIC8v5qC55o2uaWTmn6Xor6IKICAgIGdldEF0dGVuZGFuY2VCeUlkKGlkKSB7CiAgICAgIGF0dGVuZGFuY2UKICAgICAgICAuZ2V0QXR0ZW5kYW5jZUJ5SWQoaWQpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmF0dGVuZGFuY2UgPSByZXNwb25zZS5kYXRhLmF0dGVuZGFuY2U7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmF0dGVuZGFuY2UpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge30pOwogICAgfSwKICAgIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgLy/liKTmlq3mmK/kv67mlLnov5jmmK/mt7vliqAKICAgICAgLy/liKTmlq3ot6/lvoTkuK3mmK/lkKbmnIlpZAogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIC8v5L+u5pS5CiAgICAgICAgdGhpcy51cGRhdGVBdHRlbmRhbmNlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/mt7vliqAKICAgICAgICB0aGlzLnNhdmVBdHRlbmRhbmNlKCk7CiAgICAgIH0KICAgIH0sCiAgICAvL+a3u+WKoAogICAgc2F2ZUF0dGVuZGFuY2UoKSB7CiAgICAgIGF0dGVuZGFuY2UKICAgICAgICAuYWRkQXR0ZW5kYW5jZSh0aGlzLmF0dGVuZGFuY2UpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAvL+a3u+WKoOaIkOWKnwogICAgICAgICAgLy/mj5DnpLrkv6Hmga8KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDmiJDlip8iLAogICAgICAgICAgfSk7CiAgICAgICAgICAvL+WbnuWIsOWIl+ihqCDot6/nlLHot7Povawo6YeN5a6a5ZCRKQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAiL2F0dGVuZGFuY2UiLAogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAvL+aPkOekuuS/oeaBrwogICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAvLyAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIC8vICAgbWVzc2FnZTogIua3u+WKoOWksei0pSIsCiAgICAgICAgICAvLyB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["saveAttendance.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"saveAttendance.vue","sourceRoot":"src/views/attendance","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"120px\">\n      <el-form-item label=\"编号\">\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"attendance.id\" />\n      </el-form-item>\n      <el-form-item label=\"选择员工\">\n        <el-select\n          v-model=\"attendance.departmentId\"\n          clearable\n          placeholder=\"请选择部门\"\n          @change=\"selectClerk\"\n        >\n          <el-option\n            v-for=\"item in departmentList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n        <el-select\n          v-model=\"attendance.clerkId\"\n          clearable\n          placeholder=\"请选择员工\"\n        >\n          <el-option\n            v-for=\"item in clerkList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"请选择时间\">\n        <el-date-picker\n          v-model=\"attendance.time\"\n          type=\"date\"\n          placeholder=\"请选择时间\"\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\n        >\n        </el-date-picker>\n      </el-form-item>\n      \n      <el-form-item label=\"考勤类型\">\n        <el-radio v-model=\"attendance.status\" label=\"1\">事假</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"2\">迟到</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"3\">早退</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"4\">病假</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"5\">旷工</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"6\">休补</el-radio>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport attendance from \"@/api/attendance\";\nimport department from \"@/api/department\";\nimport clerk from \"@/api/clerk\";\nexport default {\n  data() {\n    return {\n      attendance: {\n        clerkId:'',\n        departmentId:''\n      },\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      departmentList: [],\n      imagecropperKey: 0, //上传组件的key值\n      clerkList: [],\n    };\n  },\n  created() {\n    this.init();\n  },\n  watch: {\n    //监听\n    $route(to, from) {\n      //路由发生变化 方法就会执行\n      this.init();\n    },\n  },\n  methods: {\n    initClerk() {\n      clerk.getClerkList().then((response) => {\n        this.clerkList = response.data.clerkList;\n      });\n    },\n    selectClerk() {\n      this.attendance.clerkId = '';\n      clerk\n        .getClerkByDepartmentId(this.attendance.departmentId)\n        .then((response) => {\n          this.clerkList = response.data.clerkList;\n        });\n    },\n    //初始化\n    init() {\n      //判断路径中是否有id值\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id;\n        this.getAttendanceById(id);\n        this.initClerk();\n      } else {\n        //清空表单\n        this.attendance = {};\n      }\n      this.initDepartment();\n    },\n    //查询部门\n    initDepartment() {\n      department.getDepartmentList().then((response) => {\n        this.departmentList = response.data.departmentList;\n      });\n      \n    },\n    //修改\n    updateAttendance() {\n      attendance\n        .updateAttendance(this.attendance)\n        .then((response) => {\n          this.$message({\n            type: \"success\",\n            message: \"修改成功!\",\n          });\n          this.$router.push({\n            path: \"/attendance\",\n          });\n        });\n    },\n    //根据id查询\n    getAttendanceById(id) {\n      attendance\n        .getAttendanceById(id)\n        .then((response) => {\n          this.attendance = response.data.attendance;\n          console.log(this.attendance);\n        })\n        .catch((error) => {});\n    },\n    saveOrUpdate() {\n      //判断是修改还是添加\n      //判断路径中是否有id\n      if (this.$route.params && this.$route.params.id) {\n        //修改\n        this.updateAttendance();\n      } else {\n        //添加\n        this.saveAttendance();\n      }\n    },\n    //添加\n    saveAttendance() {\n      attendance\n        .addAttendance(this.attendance)\n        .then((response) => {\n          //添加成功\n          //提示信息\n          this.$message({\n            type: \"success\",\n            message: \"添加成功\",\n          });\n          //回到列表 路由跳转(重定向)\n          this.$router.push({\n            path: \"/attendance\",\n          });\n        })\n        .catch((error) => {\n          //提示信息\n          // this.$message({\n          //   type: \"warning\",\n          //   message: \"添加失败\",\n          // });\n        });\n    },\n  },\n};\n</script>\n\n"]}]}