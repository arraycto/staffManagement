{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/rewardsPunishments/saveRewardsPunishments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/rewardsPunishments/saveRewardsPunishments.vue","mtime":1608726456334},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXdhcmRzUHVuaXNobWVudHMgZnJvbSAiQC9hcGkvcmV3YXJkc1B1bmlzaG1lbnRzIjsKaW1wb3J0IGRlcGFydG1lbnQgZnJvbSAiQC9hcGkvZGVwYXJ0bWVudCI7CmltcG9ydCBjbGVyayBmcm9tICJAL2FwaS9jbGVyayI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmV3YXJkc1B1bmlzaG1lbnRzOiB7CiAgICAgICAgY2xlcmtJZDogIiIsCiAgICAgICAgZGVwYXJ0bWVudElkOiAiIiwKICAgICAgfSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAogICAgICBkZXBhcnRtZW50TGlzdDogW10sCiAgICAgIGltYWdlY3JvcHBlcktleTogMCwgLy/kuIrkvKDnu4Tku7bnmoRrZXnlgLwKICAgICAgY2xlcmtMaXN0OiBbXSwKICAgICAgcnVsZTogewogICAgICAgIHRpbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36YCJ5oup5pe26Ze0IiwgdHJpZ2dlcjogImNoYW5nZSIgfV0sCiAgICAgICAgY2xlcmtJZDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nlkZjlt6UiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9XSwKICAgICAgICByZWFzb246IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7floavlhpnljp/lm6AiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIC8v55uR5ZCsCiAgICAkcm91dGUodG8sIGZyb20pIHsKICAgICAgLy/ot6/nlLHlj5HnlJ/lj5jljJYg5pa55rOV5bCx5Lya5omn6KGMCiAgICAgIHRoaXMuaW5pdCgpOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGluaXRDbGVyaygpIHsKICAgICAgY2xlcmsuZ2V0Q2xlcmtMaXN0KCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmNsZXJrTGlzdCA9IHJlc3BvbnNlLmRhdGEuY2xlcmtMaXN0OwogICAgICB9KTsKICAgIH0sCiAgICBzZWxlY3RDbGVyaygpIHsKICAgICAgLy8gdGhpcy5yZXdhcmRzUHVuaXNobWVudHMuY2xlcmtJZCA9ICIiOwogICAgICBjbGVyawogICAgICAgIC5nZXRDbGVya0J5RGVwYXJ0bWVudElkKHRoaXMucmV3YXJkc1B1bmlzaG1lbnRzLmRlcGFydG1lbnRJZCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuY2xlcmtMaXN0ID0gcmVzcG9uc2UuZGF0YS5jbGVya0xpc3Q7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy/liJ3lp4vljJYKICAgIGluaXQoKSB7CiAgICAgIC8v5Yik5pat6Lev5b6E5Lit5piv5ZCm5pyJaWTlgLwKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICB0aGlzLmdldFJld2FyZHNQdW5pc2htZW50c0J5SWQoaWQpOwogICAgICAgIHRoaXMuaW5pdENsZXJrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/muIXnqbrooajljZUKICAgICAgICB0aGlzLnJld2FyZHNQdW5pc2htZW50cyA9IHt9OwogICAgICB9CiAgICAgIHRoaXMuaW5pdERlcGFydG1lbnQoKTsKICAgIH0sCiAgICAvL+afpeivoumDqOmXqAogICAgaW5pdERlcGFydG1lbnQoKSB7CiAgICAgIGRlcGFydG1lbnQuZ2V0RGVwYXJ0bWVudExpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuZGVwYXJ0bWVudExpc3QgPSByZXNwb25zZS5kYXRhLmRlcGFydG1lbnRMaXN0OwogICAgICB9KTsKICAgIH0sCiAgICAvL+S/ruaUuQogICAgdXBkYXRlUmV3YXJkc1B1bmlzaG1lbnRzKCkgewogICAgICByZXdhcmRzUHVuaXNobWVudHMKICAgICAgICAudXBkYXRlUmV3YXJkc1B1bmlzaG1lbnRzKHRoaXMucmV3YXJkc1B1bmlzaG1lbnRzKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyEiLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICIvcmV3YXJkc1B1bmlzaG1lbnRzL2xpc3RSZXdhcmRzUHVuaXNobWVudHMiLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy/moLnmja5pZOafpeivogogICAgZ2V0UmV3YXJkc1B1bmlzaG1lbnRzQnlJZChpZCkgewogICAgICByZXdhcmRzUHVuaXNobWVudHMKICAgICAgICAuZ2V0UmV3YXJkc1B1bmlzaG1lbnRzQnlJZChpZCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMucmV3YXJkc1B1bmlzaG1lbnRzID0gcmVzcG9uc2UuZGF0YS5yZXdhcmRzUHVuaXNobWVudHM7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy/liKTmlq3mmK/kv67mlLnov5jmmK/mt7vliqAKICAgICAgICAgIC8v5Yik5pat6Lev5b6E5Lit5piv5ZCm5pyJaWQKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIC8v5L+u5pS5CiAgICAgICAgICAgIHRoaXMudXBkYXRlUmV3YXJkc1B1bmlzaG1lbnRzKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL+a3u+WKoAogICAgICAgICAgICB0aGlzLnNhdmVSZXdhcmRzUHVuaXNobWVudHMoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5re75YqgCiAgICBzYXZlUmV3YXJkc1B1bmlzaG1lbnRzKCkgewogICAgICByZXdhcmRzUHVuaXNobWVudHMKICAgICAgICAuYWRkUmV3YXJkc1B1bmlzaG1lbnRzKHRoaXMucmV3YXJkc1B1bmlzaG1lbnRzKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgLy/mt7vliqDmiJDlip8KICAgICAgICAgIC8v5o+Q56S65L+h5oGvCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfIiwKICAgICAgICAgIH0pOwogICAgICAgICAgLy/lm57liLDliJfooagg6Lev55Sx6Lez6L2sKOmHjeWumuWQkSkKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogIi9yZXdhcmRzUHVuaXNobWVudHMvbGlzdFJld2FyZHNQdW5pc2htZW50cyIsCiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIC8v5o+Q56S65L+h5oGvCiAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIC8vICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgLy8gICBtZXNzYWdlOiAi5re75Yqg5aSx6LSlIiwKICAgICAgICAgIC8vIH0pOwogICAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["saveRewardsPunishments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"saveRewardsPunishments.vue","sourceRoot":"src/views/rewardsPunishments","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form\n      :model=\"rewardsPunishments\"\n      ref=\"rewardsPunishments\"\n      :rules=\"rule\"\n      label-width=\"120px\"\n    >\n      <el-form-item label=\"编号\">\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"rewardsPunishments.id\" />\n      </el-form-item>\n      <el-form-item prop=\"time\" label=\"奖惩日期\">\n        <el-date-picker\n          v-model=\"rewardsPunishments.time\"\n          type=\"datetime\"\n          \n          placeholder=\"请选择时间\"\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\n        >\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"选择员工\">\n        <el-select\n          v-model=\"rewardsPunishments.departmentId\"\n          clearable\n          placeholder=\"请选择部门\"\n          @change=\"selectClerk\"\n        >\n          <el-option\n            v-for=\"item in departmentList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n        <el-select\n          v-model=\"rewardsPunishments.clerkId\"\n          clearable\n          placeholder=\"请选择员工\"\n        >\n          <el-option\n            v-for=\"item in clerkList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item prop=\"type\" label=\"奖惩类型\">\n        <el-radio v-model=\"rewardsPunishments.type\" label=\"0\">奖励</el-radio>\n        <el-radio v-model=\"rewardsPunishments.type\" label=\"1\">惩罚</el-radio>\n      </el-form-item>\n      <el-form-item prop=\"reason\" label=\"奖惩原因\">\n        <el-input v-model=\"rewardsPunishments.reason\" />\n      </el-form-item>\n      <el-form-item label=\"奖惩金额\">\n        <el-input v-model=\"rewardsPunishments.amount\" />\n      </el-form-item>\n      <el-form-item label=\"备注\">\n        <el-input v-model=\"rewardsPunishments.note\" />\n      </el-form-item>\n\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate('rewardsPunishments')\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport rewardsPunishments from \"@/api/rewardsPunishments\";\nimport department from \"@/api/department\";\nimport clerk from \"@/api/clerk\";\nexport default {\n  data() {\n    return {\n      rewardsPunishments: {\n        clerkId: \"\",\n        departmentId: \"\",\n      },\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      departmentList: [],\n      imagecropperKey: 0, //上传组件的key值\n      clerkList: [],\n      rule: {\n        time: [{ required: true, message: \"请选择时间\", trigger: \"change\" }],\n        clerkId: [{ required: true, message: \"请选择员工\", trigger: \"change\" }],\n        reason: [\n          { required: true, message: \"请填写原因\", trigger: \"change\" },\n        ],\n      },\n    };\n  },\n  created() {\n    this.init();\n  },\n  watch: {\n    //监听\n    $route(to, from) {\n      //路由发生变化 方法就会执行\n      this.init();\n    },\n  },\n  methods: {\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    initClerk() {\n      clerk.getClerkList().then((response) => {\n        this.clerkList = response.data.clerkList;\n      });\n    },\n    selectClerk() {\n      // this.rewardsPunishments.clerkId = \"\";\n      clerk\n        .getClerkByDepartmentId(this.rewardsPunishments.departmentId)\n        .then((response) => {\n          this.clerkList = response.data.clerkList;\n        });\n    },\n    //初始化\n    init() {\n      //判断路径中是否有id值\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id;\n        this.getRewardsPunishmentsById(id);\n        this.initClerk();\n      } else {\n        //清空表单\n        this.rewardsPunishments = {};\n      }\n      this.initDepartment();\n    },\n    //查询部门\n    initDepartment() {\n      department.getDepartmentList().then((response) => {\n        this.departmentList = response.data.departmentList;\n      });\n    },\n    //修改\n    updateRewardsPunishments() {\n      rewardsPunishments\n        .updateRewardsPunishments(this.rewardsPunishments)\n        .then((response) => {\n          this.$message({\n            type: \"success\",\n            message: \"修改成功!\",\n          });\n          this.$router.push({\n            path: \"/rewardsPunishments/listRewardsPunishments\",\n          });\n        });\n    },\n    //根据id查询\n    getRewardsPunishmentsById(id) {\n      rewardsPunishments\n        .getRewardsPunishmentsById(id)\n        .then((response) => {\n          this.rewardsPunishments = response.data.rewardsPunishments;\n        })\n        .catch((error) => {});\n    },\n    saveOrUpdate(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          //判断是修改还是添加\n          //判断路径中是否有id\n          if (this.$route.params && this.$route.params.id) {\n            //修改\n            this.updateRewardsPunishments();\n          } else {\n            //添加\n            this.saveRewardsPunishments();\n          }\n        }\n      });\n    },\n    //添加\n    saveRewardsPunishments() {\n      rewardsPunishments\n        .addRewardsPunishments(this.rewardsPunishments)\n        .then((response) => {\n          //添加成功\n          //提示信息\n          this.$message({\n            type: \"success\",\n            message: \"添加成功\",\n          });\n          //回到列表 路由跳转(重定向)\n          this.$router.push({\n            path: \"/rewardsPunishments/listRewardsPunishments\",\n          });\n        })\n        .catch((error) => {\n          //提示信息\n          // this.$message({\n          //   type: \"warning\",\n          //   message: \"添加失败\",\n          // });\n        });\n    },\n  },\n};\n</script>\n\n"]}]}