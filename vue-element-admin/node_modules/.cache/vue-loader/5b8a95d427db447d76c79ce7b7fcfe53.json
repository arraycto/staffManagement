{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/clerk/saveClerk.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/clerk/saveClerk.vue","mtime":1608726456324},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjbGVyayBmcm9tICJAL2FwaS9jbGVyayI7CmltcG9ydCBkZXBhcnRtZW50IGZyb20gIkAvYXBpL2RlcGFydG1lbnQiOwppbXBvcnQgSW1hZ2VDcm9wcGVyIGZyb20gIkAvY29tcG9uZW50cy9JbWFnZUNyb3BwZXIiOwppbXBvcnQgUGFuVGh1bWIgZnJvbSAiQC9jb21wb25lbnRzL1BhblRodW1iIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEltYWdlQ3JvcHBlciwgUGFuVGh1bWIgfSwKICBkYXRhKCkgewogICAgdmFyIGNoZWNrUGhvbmUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLmiYvmnLrlj7fkuI3og73kuLrnqboiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgcmVnID0gL14xWzN8NHw1fDd8OF1bMC05XVxkezh9JC87CiAgICAgICAgaWYgKHJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+3IikpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGNsZXJrOiB7fSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAogICAgICBkZXBhcnRtZW50TGlzdDogbnVsbCwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAogICAgICBpbWFnZWNyb3BwZXJTaG93OiBmYWxzZSwgLy/kuIrkvKDlvLnnqpfnu4Tku7bmmK/lkKbmmL7npLoKICAgICAgaW1hZ2Vjcm9wcGVyS2V5OiAwLCAvL+S4iuS8oOe7hOS7tueahGtleeWAvAogICAgICBydWxlOiB7CiAgICAgICAgc2V4OiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeaAp+WIqyIsIHRyaWdnZXI6ICJjaGFuZ2UiIH1dLAogICAgICAgIGFkZHJlc3M6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35aGr5YaZ5Zyw5Z2AIiwgdHJpZ2dlcjogImNoYW5nZSIgfV0sCiAgICAgICAgcG9zaXRpb246IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7floavlhpnogYzliqEiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9LAogICAgICAgIF0sCiAgICAgICAgZGVwYXJ0bWVudElkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36YCJ5oup6YOo6ZeoIiwgdHJpZ2dlcjogImNoYW5nZSIgfSwKICAgICAgICBdLAogICAgICAgIHBob25lTnVtYmVyOiBbCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tQaG9uZSwgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWnk+WQjSIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgewogICAgICAgICAgICBtaW46IDIsCiAgICAgICAgICAgIG1heDogMTAsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLplb/luqblnKggMiDliLAgMTAg5Liq5a2X56ymIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHBhdHRlcm46IC9eW1x1NGUwMC1cdTlmYTVfYS16QS1aMC05LsK3LV0rJC8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlp5PlkI3kuI3mlK/mjIHnibnmrorlrZfnrKYiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgaWRDYXJkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl6Lqr5Lu96K+B5Y+3IiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogMTUsCiAgICAgICAgICAgIG1heDogMTgsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7flpoLlrp7loavlhpkxOOS9jeWPt+egge+8jOS7peS+m+aguOWvuSIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBwYXR0ZXJuOiAvKF5cZHsxNX0kKXwoXlxkezE4fSQpfCheXGR7MTd9KFxkfFh8eCkkKS8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXmraPnoa7nmoTouqvku73or4Hlj7fnoIEiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5pbml0RGVwYXJ0bWVudCgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIC8v55uR5ZCsCiAgICAkcm91dGUodG8sIGZyb20pIHsKICAgICAgLy/ot6/nlLHlj5HnlJ/lj5jljJYg5pa55rOV5bCx5Lya5omn6KGMCiAgICAgIHRoaXMuaW5pdCgpOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgLy/lhbPpl63kuIrkvKDlvLnmoYbnmoTmlrnms5UKICAgICAgdGhpcy5pbWFnZWNyb3BwZXJTaG93ID0gZmFsc2U7CiAgICAgIC8v5LiK5Lyg57uE5Lu25Yid5aeL5YyWCiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOwogICAgfSwKICAgIC8v5LiK5Lyg5oiQ5Yqf5pa55rOVCiAgICBjcm9wU3VjY2VzcyhkYXRhKSB7CiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyU2hvdyA9IGZhbHNlOwogICAgICAvL+S4iuS8oOS5i+WQjuaOpeWPo+i/lOWbnuWbvueJh+WcsOWdgAogICAgICB0aGlzLmNsZXJrLnBob3RvID0gZGF0YS51cmw7CiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOwogICAgfSwKICAgIC8v5Yid5aeL5YyWCiAgICBpbml0KCkgewogICAgICAvL+WIpOaWrei3r+W+hOS4reaYr+WQpuaciWlk5YC8CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgY29uc3QgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgdGhpcy5nZXRDbGVya0J5SWQoaWQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5riF56m66KGo5Y2VCiAgICAgICAgdGhpcy5jbGVyayA9IHt9OwogICAgICB9CiAgICB9LAogICAgLy/mn6Xor6Lpg6jpl6gKICAgIGluaXREZXBhcnRtZW50KCkgewogICAgICBkZXBhcnRtZW50LmdldERlcGFydG1lbnRMaXN0KCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmRlcGFydG1lbnRMaXN0ID0gcmVzcG9uc2UuZGF0YS5kZXBhcnRtZW50TGlzdDsKICAgICAgfSk7CiAgICB9LAogICAgLy/kv67mlLkKICAgIHVwZGF0ZUNsZXJrKCkgewogICAgICBjbGVyay51cGRhdGVDbGVyayh0aGlzLmNsZXJrKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyEiLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9jbGVyay9saXN0Q2xlcmsiIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrmlk5p+l6K+iCiAgICBnZXRDbGVya0J5SWQoaWQpIHsKICAgICAgY2xlcmsKICAgICAgICAuZ2V0Q2xlcmtCeUlkKGlkKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5jbGVyayA9IHJlc3BvbnNlLmRhdGEuY2xlcms7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy/liKTmlq3mmK/kv67mlLnov5jmmK/mt7vliqAKICAgICAgICAgIC8v5Yik5pat6Lev5b6E5Lit5piv5ZCm5pyJaWQKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICAgIC8v5L+u5pS5CiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2xlcmsoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8v5re75YqgCiAgICAgICAgICAgIHRoaXMuc2F2ZUNsZXJrKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+a3u+WKoAogICAgc2F2ZUNsZXJrKGZvcm1OYW1lKSB7CiAgICAgIGNsZXJrCiAgICAgICAgLmFkZENsZXJrKHRoaXMuY2xlcmspCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAvL+a3u+WKoOaIkOWKnwogICAgICAgICAgLy/mj5DnpLrkv6Hmga8KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDmiJDlip8iLAogICAgICAgICAgfSk7CiAgICAgICAgICAvL+WbnuWIsOWIl+ihqCDot6/nlLHot7Povawo6YeN5a6a5ZCRKQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAiL2NsZXJrL2xpc3RDbGVyayIgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAvL+aPkOekuuS/oeaBrwogICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAvLyAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIC8vICAgbWVzc2FnZTogIua3u+WKoOWksei0pSIsCiAgICAgICAgICAvLyB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["saveClerk.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"saveClerk.vue","sourceRoot":"src/views/clerk","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"clerk\" ref=\"clerk\" :rules=\"rule\" label-width=\"120px\">\n      <el-form-item label=\"员工编号\">\n        <el-col :span=\"6\">\n          <el-input :span=\"6\" :disabled=\"true\" v-model=\"clerk.id\" />\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"name\" label=\"员工名称\">\n        <el-col :span=\"4\">\n          <el-input maxlength=\"5\" show-word-limit v-model=\"clerk.name\" />\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"sex\" label=\"性别\">\n        <el-col :span=\"4\">\n          <el-radio v-model=\"clerk.sex\" prop=\"sex\" label=\"0\">女</el-radio>\n          <el-radio v-model=\"clerk.sex\" prop=\"sex\" label=\"1\">男</el-radio>\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"phoneNumber\" label=\"手机号\">\n        <el-col :span=\"6\">\n          <el-input v-model=\"clerk.phoneNumber\" />\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"idCard\" label=\"身份证号\">\n        <el-col :span=\"8\">\n          <el-input v-model=\"clerk.idCard\" />\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"address\" label=\"地址\">\n        <el-input v-model=\"clerk.address\" />\n      </el-form-item>\n      <el-form-item prop=\"position\" label=\"职务\">\n        <el-col :span=\"4\">\n          <el-input v-model=\"clerk.position\" />\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"departmentId\" label=\"部门\">\n        <el-select v-model=\"clerk.departmentId\" clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in departmentList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"员工照片\">\n        <!-- 头衔缩略图 -->\n        <pan-thumb :image=\"clerk.photo + ''\" />\n        <!-- 文件上传按钮 -->\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-upload\"\n          @click=\"imagecropperShow = true\"\n          >更换照片</el-button\n        >\n        <!--v-show：是否显示上传组件\n        :key：类似于id，如果一个页面多个图片上传控件，可以做区分\n        :url：后台上传的url地址\n        @close：关闭上传组件\n        @crop-upload-success：上传成功后的回调-->\n        <image-cropper\n          v-show=\"imagecropperShow\"\n          :width=\"300\"\n          :height=\"300\"\n          :key=\"imagecropperKey\"\n          url=\"http://localhost:8001/oss/fileoss/uploadOssFile\"\n          field=\"file\"\n          @close=\"close\"\n          @crop-upload-success=\"cropSuccess\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate('clerk')\"\n          >保存</el-button\n        >\n        <el-button @click=\"resetForm('clerk')\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport clerk from \"@/api/clerk\";\nimport department from \"@/api/department\";\nimport ImageCropper from \"@/components/ImageCropper\";\nimport PanThumb from \"@/components/PanThumb\";\n\nexport default {\n  components: { ImageCropper, PanThumb },\n  data() {\n    var checkPhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"手机号不能为空\"));\n      } else {\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/;\n        if (reg.test(value)) {\n          callback();\n        } else {\n          return callback(new Error(\"请输入正确的手机号\"));\n        }\n      }\n    };\n    return {\n      clerk: {},\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      departmentList: null,\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      imagecropperShow: false, //上传弹窗组件是否显示\n      imagecropperKey: 0, //上传组件的key值\n      rule: {\n        sex: [{ required: true, message: \"请选择性别\", trigger: \"change\" }],\n        address: [{ required: true, message: \"请填写地址\", trigger: \"change\" }],\n        position: [\n          { required: true, message: \"请填写职务\", trigger: \"change\" },\n        ],\n        departmentId: [\n          { required: true, message: \"请选择部门\", trigger: \"change\" },\n        ],\n        phoneNumber: [\n          { validator: checkPhone, required: true, trigger: \"blur\" },\n        ],\n        name: [\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 10,\n            message: \"长度在 2 到 10 个字符\",\n            trigger: \"blur\",\n          },\n          {\n            required: true,\n            pattern: /^[\\u4e00-\\u9fa5_a-zA-Z0-9.·-]+$/,\n            message: \"姓名不支持特殊字符\",\n            trigger: \"blur\",\n          },\n        ],\n        idCard: [\n          { required: true, message: \"请输入身份证号\", trigger: \"blur\" },\n          {\n            min: 15,\n            max: 18,\n            message: \"请如实填写18位号码，以供核对\",\n            trigger: \"blur\",\n          },\n          {\n            required: true,\n            pattern: /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/,\n            message: \"请输入正确的身份证号码\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  created() {\n    this.init();\n    this.initDepartment();\n  },\n  watch: {\n    //监听\n    $route(to, from) {\n      //路由发生变化 方法就会执行\n      this.init();\n    },\n  },\n  methods: {\n    resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n    close() {\n      //关闭上传弹框的方法\n      this.imagecropperShow = false;\n      //上传组件初始化\n      this.imagecropperKey = this.imagecropperKey + 1;\n    },\n    //上传成功方法\n    cropSuccess(data) {\n      this.imagecropperShow = false;\n      //上传之后接口返回图片地址\n      this.clerk.photo = data.url;\n      this.imagecropperKey = this.imagecropperKey + 1;\n    },\n    //初始化\n    init() {\n      //判断路径中是否有id值\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id;\n        this.getClerkById(id);\n      } else {\n        //清空表单\n        this.clerk = {};\n      }\n    },\n    //查询部门\n    initDepartment() {\n      department.getDepartmentList().then((response) => {\n        this.departmentList = response.data.departmentList;\n      });\n    },\n    //修改\n    updateClerk() {\n      clerk.updateClerk(this.clerk).then((response) => {\n        this.$message({\n          type: \"success\",\n          message: \"修改成功!\",\n        });\n        this.$router.push({ path: \"/clerk/listClerk\" });\n      });\n    },\n    //根据id查询\n    getClerkById(id) {\n      clerk\n        .getClerkById(id)\n        .then((response) => {\n          this.clerk = response.data.clerk;\n        })\n        .catch((error) => {});\n    },\n    saveOrUpdate(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          //判断是修改还是添加\n          //判断路径中是否有id\n          if (this.$route.params && this.$route.params.id) {\n            //修改\n            this.updateClerk();\n          } else {\n            //添加\n            this.saveClerk();\n          }\n        }\n      });\n    },\n    //添加\n    saveClerk(formName) {\n      clerk\n        .addClerk(this.clerk)\n        .then((response) => {\n          //添加成功\n          //提示信息\n          this.$message({\n            type: \"success\",\n            message: \"添加成功\",\n          });\n          //回到列表 路由跳转(重定向)\n          this.$router.push({ path: \"/clerk/listClerk\" });\n        })\n        .catch((error) => {\n          //提示信息\n          // this.$message({\n          //   type: \"warning\",\n          //   message: \"添加失败\",\n          // });\n        });\n    },\n  },\n};\n</script>\n\n"]}]}