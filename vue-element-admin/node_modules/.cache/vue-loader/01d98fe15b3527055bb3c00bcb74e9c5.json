{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/components/ImageCropper/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/components/ImageCropper/index.vue","mtime":1608726456278},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiJ1c2Ugc3RyaWN0IjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKaW1wb3J0IGxhbmd1YWdlIGZyb20gIi4vdXRpbHMvbGFuZ3VhZ2UuanMiOwppbXBvcnQgbWltZXMgZnJvbSAiLi91dGlscy9taW1lcy5qcyI7CmltcG9ydCBkYXRhMmJsb2IgZnJvbSAiLi91dGlscy9kYXRhMmJsb2IuanMiOwppbXBvcnQgZWZmZWN0UmlwcGxlIGZyb20gIi4vdXRpbHMvZWZmZWN0UmlwcGxlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICAvLyDln5/vvIzkuIrkvKDmlofku7ZuYW1l77yM6Kem5Y+R5LqL5Lu25Lya5bim5LiK77yI5aaC5p6c5LiA5Liq6aG16Z2i5aSa5Liq5Zu+54mH5LiK5Lyg5o6n5Lu277yM5Y+v5Lul5YGa5Yy65YiGCiAgICBmaWVsZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJhdmF0YXIiLAogICAgfSwKICAgIC8vIOWOn+WQjWtlee+8jOexu+S8vOS6jmlk77yM6Kem5Y+R5LqL5Lu25Lya5bim5LiK77yI5aaC5p6c5LiA5Liq6aG16Z2i5aSa5Liq5Zu+54mH5LiK5Lyg5o6n5Lu277yM5Y+v5Lul5YGa5Yy65YiGCiAgICBraTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAsCiAgICB9LAogICAgLy8g5pi+56S66K+l5o6n5Lu25LiO5ZCmCiAgICB2YWx1ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlLAogICAgfSwKICAgIC8vIOS4iuS8oOWcsOWdgAogICAgdXJsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogICAgLy8g5YW25LuW6KaB5LiK5Lyg5paH5Lu26ZmE5bim55qE5pWw5o2u77yM5a+56LGh5qC85byPCiAgICBwYXJhbXM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIC8vIEFkZCBjdXN0b20gaGVhZGVycwogICAgaGVhZGVyczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgLy8g5Ymq6KOB5Zu+54mH55qE5a69CiAgICB3aWR0aDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDIwMCwKICAgIH0sCiAgICAvLyDliaroo4Hlm77niYfnmoTpq5gKICAgIGhlaWdodDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDIwMCwKICAgIH0sCiAgICAvLyDkuI3mmL7npLrml4vovazlip/og70KICAgIG5vUm90YXRlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogICAgLy8g5LiN6aKE6KeI5ZyG5b2i5Zu+54mHCiAgICBub0NpcmNsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICAvLyDkuI3pooTop4jmlrnlvaLlm77niYcKICAgIG5vU3F1YXJlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIC8vIOWNleaWh+S7tuWkp+Wwj+mZkOWItgogICAgbWF4U2l6ZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEwMjQwLAogICAgfSwKICAgIC8vIOivreiogOexu+WeiwogICAgbGFuZ1R5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiemgiLAogICAgfSwKICAgIC8vIOivreiogOWMhQogICAgbGFuZ0V4dDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgLy8g5Zu+54mH5LiK5Lyg5qC85byPCiAgICBpbWdGb3JtYXQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAicG5nIiwKICAgIH0sCiAgICAvLyDmmK/lkKbmlK/mjIHot6jln58KICAgIHdpdGhDcmVkZW50aWFsczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgY29uc3QgeyBpbWdGb3JtYXQsIGxhbmdUeXBlLCBsYW5nRXh0LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzOwogICAgbGV0IGlzU3VwcG9ydGVkID0gdHJ1ZTsKICAgIGNvbnN0IGFsbG93SW1nRm9ybWF0ID0gWyJqcGciLCAicG5nIl07CiAgICBjb25zdCB0ZW1wSW1nRm9ybWF0ID0KICAgICAgYWxsb3dJbWdGb3JtYXQuaW5kZXhPZihpbWdGb3JtYXQpID09PSAtMSA/ICJqcGciIDogaW1nRm9ybWF0OwogICAgY29uc3QgbGFuZyA9IGxhbmd1YWdlW2xhbmdUeXBlXSA/IGxhbmd1YWdlW2xhbmdUeXBlXSA6IGxhbmd1YWdlWyJlbiJdOwogICAgY29uc3QgbWltZSA9IG1pbWVzW3RlbXBJbWdGb3JtYXRdOwogICAgLy8g6KeE6IyD5Zu+54mH5qC85byPCiAgICB0aGlzLmltZ0Zvcm1hdCA9IHRlbXBJbWdGb3JtYXQ7CiAgICBpZiAobGFuZ0V4dCkgewogICAgICBPYmplY3QuYXNzaWduKGxhbmcsIGxhbmdFeHQpOwogICAgfQogICAgaWYgKHR5cGVvZiBGb3JtRGF0YSAhPT0gImZ1bmN0aW9uIikgewogICAgICBpc1N1cHBvcnRlZCA9IGZhbHNlOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgLy8g5Zu+54mH55qEbWltZQogICAgICBtaW1lLAogICAgICAvLyDor63oqIDljIUKICAgICAgbGFuZywKICAgICAgLy8g5rWP6KeI5Zmo5piv5ZCm5pSv5oyB6K+l5o6n5Lu2CiAgICAgIGlzU3VwcG9ydGVkLAogICAgICAvLyDmtY/op4jlmajmmK/lkKbmlK/mjIHop6blsY/kuovku7YKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwogICAgICBpc1N1cHBvcnRUb3VjaDogZG9jdW1lbnQuaGFzT3duUHJvcGVydHkoIm9udG91Y2hzdGFydCIpLAogICAgICAvLyDmraXpqqQKICAgICAgc3RlcDogMSwgLy8gMemAieaLqeaWh+S7tiAy5Ymq6KOBIDPkuIrkvKAKICAgICAgLy8g5LiK5Lyg54q25oCB5Y+K6L+b5bqmCiAgICAgIGxvYWRpbmc6IDAsIC8vIDDmnKrlvIDlp4sgMeato+WcqCAy5oiQ5YqfIDPplJnor68KICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgIC8vIOaYr+WQpuaciemUmeivr+WPiumUmeivr+S/oeaBrwogICAgICBoYXNFcnJvcjogZmFsc2UsCiAgICAgIGVycm9yTXNnOiAiIiwKICAgICAgLy8g6ZyA5rGC5Zu+5a696auY5q+UCiAgICAgIHJhdGlvOiB3aWR0aCAvIGhlaWdodCwKICAgICAgLy8g5Y6f5Zu+5Zyw5Z2A44CB55Sf5oiQ5Zu+54mH5Zyw5Z2ACiAgICAgIHNvdXJjZUltZzogbnVsbCwKICAgICAgc291cmNlSW1nVXJsOiAiIiwKICAgICAgY3JlYXRlSW1nVXJsOiAiIiwKICAgICAgLy8g5Y6f5Zu+54mH5ouW5Yqo5LqL5Lu25Yid5aeL5YC8CiAgICAgIHNvdXJjZUltZ01vdXNlRG93bjogewogICAgICAgIG9uOiBmYWxzZSwKICAgICAgICBtWDogMCwgLy8g6byg5qCH5oyJ5LiL55qE5Z2Q5qCHCiAgICAgICAgbVk6IDAsCiAgICAgICAgeDogMCwgLy8gc2NhbGXljp/lm77lnZDmoIcKICAgICAgICB5OiAwLAogICAgICB9LAogICAgICAvLyDnlJ/miJDlm77niYfpooTop4jnmoTlrrnlmajlpKflsI8KICAgICAgcHJldmlld0NvbnRhaW5lcjogewogICAgICAgIHdpZHRoOiAxMDAsCiAgICAgICAgaGVpZ2h0OiAxMDAsCiAgICAgIH0sCiAgICAgIC8vIOWOn+WbvuWuueWZqOWuvemrmAogICAgICBzb3VyY2VJbWdDb250YWluZXI6IHsKICAgICAgICAvLyBzaWMKICAgICAgICB3aWR0aDogMjQwLAogICAgICAgIGhlaWdodDogMTg0LCAvLyDlpoLmnpznlJ/miJDlm77mr5TkvovkuI7mraTkuIDoh7TkvJrlh7rnjrBidWfvvIzlhYjmlLnmiJDnibnmrornmoTmoLzlvI/lkKfvvIzlk4jlk4jlk4gKICAgICAgfSwKICAgICAgLy8g5Y6f5Zu+5bGV56S65bGe5oCnCiAgICAgIHNjYWxlOiB7CiAgICAgICAgem9vbUFkZE9uOiBmYWxzZSwgLy8g5oyJ6ZKu57yp5pS+5LqL5Lu25byA5ZCvCiAgICAgICAgem9vbVN1Yk9uOiBmYWxzZSwgLy8g5oyJ6ZKu57yp5pS+5LqL5Lu25byA5ZCvCiAgICAgICAgcmFuZ2U6IDEsIC8vIOacgOWkpzEwMAogICAgICAgIHJvdGF0ZUxlZnQ6IGZhbHNlLCAvLyDmjInpkq7lkJHlt6bml4vovazkuovku7blvIDlkK8KICAgICAgICByb3RhdGVSaWdodDogZmFsc2UsIC8vIOaMiemSruWQkeWPs+aXi+i9rOS6i+S7tuW8gOWQrwogICAgICAgIGRlZ3JlZTogMCwgLy8g5peL6L2s5bqm5pWwCiAgICAgICAgeDogMCwKICAgICAgICB5OiAwLAogICAgICAgIHdpZHRoOiAwLAogICAgICAgIGhlaWdodDogMCwKICAgICAgICBtYXhXaWR0aDogMCwKICAgICAgICBtYXhIZWlnaHQ6IDAsCiAgICAgICAgbWluV2lkdGg6IDAsIC8vIOacgOWuvQogICAgICAgIG1pbkhlaWdodDogMCwKICAgICAgICBuYXR1cmFsV2lkdGg6IDAsIC8vIOWOn+WuvQogICAgICAgIG5hdHVyYWxIZWlnaHQ6IDAsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOi/m+W6puadoeagt+W8jwogICAgcHJvZ3Jlc3NTdHlsZSgpIHsKICAgICAgY29uc3QgeyBwcm9ncmVzcyB9ID0gdGhpczsKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogcHJvZ3Jlc3MgKyAiJSIsCiAgICAgIH07CiAgICB9LAogICAgLy8g5Y6f5Zu+5qC35byPCiAgICBzb3VyY2VJbWdTdHlsZSgpIHsKICAgICAgY29uc3QgeyBzY2FsZSwgc291cmNlSW1nTWFza2luZyB9ID0gdGhpczsKICAgICAgY29uc3QgdG9wID0gc2NhbGUueSArIHNvdXJjZUltZ01hc2tpbmcueSArICJweCI7CiAgICAgIGNvbnN0IGxlZnQgPSBzY2FsZS54ICsgc291cmNlSW1nTWFza2luZy54ICsgInB4IjsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3AsCiAgICAgICAgbGVmdCwKICAgICAgICB3aWR0aDogc2NhbGUud2lkdGggKyAicHgiLAogICAgICAgIGhlaWdodDogc2NhbGUuaGVpZ2h0ICsgInB4IiwKICAgICAgICB0cmFuc2Zvcm06ICJyb3RhdGUoIiArIHNjYWxlLmRlZ3JlZSArICJkZWcpIiwgLy8g5peL6L2s5pe2IOW3puS+p+WOn+Wni+WbvuaXi+i9rOagt+W8jwogICAgICAgICItbXMtdHJhbnNmb3JtIjogInJvdGF0ZSgiICsgc2NhbGUuZGVncmVlICsgImRlZykiLCAvLyDlhbzlrrlJRTkKICAgICAgICAiLW1vei10cmFuc2Zvcm0iOiAicm90YXRlKCIgKyBzY2FsZS5kZWdyZWUgKyAiZGVnKSIsIC8vIOWFvOWuuUZpcmVGb3gKICAgICAgICAiLXdlYmtpdC10cmFuc2Zvcm0iOiAicm90YXRlKCIgKyBzY2FsZS5kZWdyZWUgKyAiZGVnKSIsIC8vIOWFvOWuuVNhZmFyaSDlkowgY2hyb21lCiAgICAgICAgIi1vLXRyYW5zZm9ybSI6ICJyb3RhdGUoIiArIHNjYWxlLmRlZ3JlZSArICJkZWcpIiwgLy8g5YW85a65IE9wZXJhCiAgICAgIH07CiAgICB9LAogICAgLy8g5Y6f5Zu+6JKZ54mI5bGe5oCnCiAgICBzb3VyY2VJbWdNYXNraW5nKCkgewogICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIHJhdGlvLCBzb3VyY2VJbWdDb250YWluZXIgfSA9IHRoaXM7CiAgICAgIGNvbnN0IHNpYyA9IHNvdXJjZUltZ0NvbnRhaW5lcjsKICAgICAgY29uc3Qgc2ljUmF0aW8gPSBzaWMud2lkdGggLyBzaWMuaGVpZ2h0OyAvLyDljp/lm77lrrnlmajlrr3pq5jmr5QKICAgICAgbGV0IHggPSAwOwogICAgICBsZXQgeSA9IDA7CiAgICAgIGxldCB3ID0gc2ljLndpZHRoOwogICAgICBsZXQgaCA9IHNpYy5oZWlnaHQ7CiAgICAgIGxldCBzY2FsZSA9IDE7CiAgICAgIGlmIChyYXRpbyA8IHNpY1JhdGlvKSB7CiAgICAgICAgc2NhbGUgPSBzaWMuaGVpZ2h0IC8gaGVpZ2h0OwogICAgICAgIHcgPSBzaWMuaGVpZ2h0ICogcmF0aW87CiAgICAgICAgeCA9IChzaWMud2lkdGggLSB3KSAvIDI7CiAgICAgIH0KICAgICAgaWYgKHJhdGlvID4gc2ljUmF0aW8pIHsKICAgICAgICBzY2FsZSA9IHNpYy53aWR0aCAvIHdpZHRoOwogICAgICAgIGggPSBzaWMud2lkdGggLyByYXRpbzsKICAgICAgICB5ID0gKHNpYy5oZWlnaHQgLSBoKSAvIDI7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBzY2FsZSwgLy8g6JKZ54mI55u45a+56ZyA5rGC5a696auY55qE57yp5pS+CiAgICAgICAgeCwKICAgICAgICB5LAogICAgICAgIHdpZHRoOiB3LAogICAgICAgIGhlaWdodDogaCwKICAgICAgfTsKICAgIH0sCiAgICAvLyDljp/lm77pga7nvanmoLflvI8KICAgIHNvdXJjZUltZ1NoYWRlU3R5bGUoKSB7CiAgICAgIGNvbnN0IHsgc291cmNlSW1nTWFza2luZywgc291cmNlSW1nQ29udGFpbmVyIH0gPSB0aGlzOwogICAgICBjb25zdCBzaWMgPSBzb3VyY2VJbWdDb250YWluZXI7CiAgICAgIGNvbnN0IHNpbSA9IHNvdXJjZUltZ01hc2tpbmc7CiAgICAgIGNvbnN0IHcgPQogICAgICAgIHNpbS53aWR0aCA9PT0gc2ljLndpZHRoID8gc2ltLndpZHRoIDogKHNpYy53aWR0aCAtIHNpbS53aWR0aCkgLyAyOwogICAgICBjb25zdCBoID0KICAgICAgICBzaW0uaGVpZ2h0ID09PSBzaWMuaGVpZ2h0ID8gc2ltLmhlaWdodCA6IChzaWMuaGVpZ2h0IC0gc2ltLmhlaWdodCkgLyAyOwogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiB3ICsgInB4IiwKICAgICAgICBoZWlnaHQ6IGggKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIHByZXZpZXdTdHlsZSgpIHsKICAgICAgY29uc3QgeyByYXRpbywgcHJldmlld0NvbnRhaW5lciB9ID0gdGhpczsKICAgICAgY29uc3QgcGMgPSBwcmV2aWV3Q29udGFpbmVyOwogICAgICBsZXQgdyA9IHBjLndpZHRoOwogICAgICBsZXQgaCA9IHBjLmhlaWdodDsKICAgICAgY29uc3QgcGNSYXRpbyA9IHcgLyBoOwogICAgICBpZiAocmF0aW8gPCBwY1JhdGlvKSB7CiAgICAgICAgdyA9IHBjLmhlaWdodCAqIHJhdGlvOwogICAgICB9CiAgICAgIGlmIChyYXRpbyA+IHBjUmF0aW8pIHsKICAgICAgICBoID0gcGMud2lkdGggLyByYXRpbzsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiB3ICsgInB4IiwKICAgICAgICBoZWlnaHQ6IGggKyAicHgiLAogICAgICB9OwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZShuZXdWYWx1ZSkgewogICAgICBpZiAobmV3VmFsdWUgJiYgdGhpcy5sb2FkaW5nICE9PSAxKSB7CiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICB9CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOe7keWumuaMiemUrmVzY+makOiXj+atpOaPkuS7tuS6i+S7tgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCB0aGlzLmNsb3NlSGFuZGxlcik7CiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXl1cCIsIHRoaXMuY2xvc2VIYW5kbGVyKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOeCueWHu+azoue6ueaViOaenAogICAgcmlwcGxlKGUpIHsKICAgICAgZWZmZWN0UmlwcGxlKGUpOwogICAgfSwKICAgIC8vIOWFs+mXreaOp+S7tgogICAgb2ZmKCkgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIGZhbHNlKTsKICAgICAgICB0aGlzLiRlbWl0KCJjbG9zZSIpOwogICAgICAgIGlmICh0aGlzLnN0ZXAgPT09IDMgJiYgdGhpcy5sb2FkaW5nID09PSAyKSB7CiAgICAgICAgICB0aGlzLnNldFN0ZXAoMSk7CiAgICAgICAgfQogICAgICB9LCAyMDApOwogICAgfSwKICAgIC8vIOiuvue9ruatpemqpAogICAgc2V0U3RlcChubykgewogICAgICAvLyDlu7bml7bmmK/kuLrkuobmmL7npLrliqjnlLvmlYjmnpzlkaLvvIzlk4jlk4jlk4gKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5zdGVwID0gbm87CiAgICAgIH0sIDIwMCk7CiAgICB9LAogICAgLyog5Zu+54mH6YCJ5oup5Yy65Z+f5Ye95pWw57uR5a6aCiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KICAgIHByZXZlbnREZWZhdWx0KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlQ2xpY2soZSkgewogICAgICBpZiAodGhpcy5sb2FkaW5nICE9PSAxKSB7CiAgICAgICAgaWYgKGUudGFyZ2V0ICE9PSB0aGlzLiRyZWZzLmZpbGVpbnB1dCkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHRoaXMuJHJlZnMpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5maWxlaW5wdXQuY2xpY2soKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGlmICh0aGlzLmxvYWRpbmcgIT09IDEpIHsKICAgICAgICBjb25zdCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICBpZiAodGhpcy5jaGVja0ZpbGUoZmlsZXNbMF0pKSB7CiAgICAgICAgICB0aGlzLnNldFNvdXJjZUltZyhmaWxlc1swXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KICAgIC8vIOajgOa1i+mAieaLqeeahOaWh+S7tuaYr+WQpuWQiOmAggogICAgY2hlY2tGaWxlKGZpbGUpIHsKICAgICAgY29uc3QgeyBsYW5nLCBtYXhTaXplIH0gPSB0aGlzOwogICAgICAvLyDku4XpmZDlm77niYcKICAgICAgaWYgKGZpbGUudHlwZS5pbmRleE9mKCJpbWFnZSIpID09PSAtMSkgewogICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNc2cgPSBsYW5nLmVycm9yLm9ubHlJbWc7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIC8vIOi2heWHuuWkp+WwjwogICAgICBpZiAoZmlsZS5zaXplIC8gMTAyNCA+IG1heFNpemUpIHsKICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yTXNnID0gbGFuZy5lcnJvci5vdXRPZlNpemUgKyBtYXhTaXplICsgImtiIjsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLy8g6YeN572u5o6n5Lu2CiAgICByZXNldCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gMDsKICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlOwogICAgICB0aGlzLmVycm9yTXNnID0gIiI7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwOwogICAgfSwKICAgIC8vIOiuvue9ruWbvueJh+a6kAogICAgc2V0U291cmNlSW1nKGZpbGUpIHsKICAgICAgY29uc3QgZnIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICBmci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgIHRoaXMuc291cmNlSW1nVXJsID0gZnIucmVzdWx0OwogICAgICAgIHRoaXMuc3RhcnRDcm9wKCk7CiAgICAgIH07CiAgICAgIGZyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICB9LAogICAgLy8g5Ymq6KOB5YmN5YeG5aSH5bel5L2cCiAgICBzdGFydENyb3AoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgcmF0aW8sCiAgICAgICAgc2NhbGUsCiAgICAgICAgc291cmNlSW1nVXJsLAogICAgICAgIHNvdXJjZUltZ01hc2tpbmcsCiAgICAgICAgbGFuZywKICAgICAgfSA9IHRoaXM7CiAgICAgIGNvbnN0IHNpbSA9IHNvdXJjZUltZ01hc2tpbmc7CiAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICBpbWcuc3JjID0gc291cmNlSW1nVXJsOwogICAgICBpbWcub25sb2FkID0gKCkgPT4gewogICAgICAgIGNvbnN0IG5XaWR0aCA9IGltZy5uYXR1cmFsV2lkdGg7CiAgICAgICAgY29uc3QgbkhlaWdodCA9IGltZy5uYXR1cmFsSGVpZ2h0OwogICAgICAgIGNvbnN0IG5SYXRpbyA9IG5XaWR0aCAvIG5IZWlnaHQ7CiAgICAgICAgbGV0IHcgPSBzaW0ud2lkdGg7CiAgICAgICAgbGV0IGggPSBzaW0uaGVpZ2h0OwogICAgICAgIGxldCB4ID0gMDsKICAgICAgICBsZXQgeSA9IDA7CiAgICAgICAgLy8g5Zu+54mH5YOP57Sg5LiN6L6+5qCHCiAgICAgICAgaWYgKG5XaWR0aCA8IHdpZHRoIHx8IG5IZWlnaHQgPCBoZWlnaHQpIHsKICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlOwogICAgICAgICAgdGhpcy5lcnJvck1zZyA9IGxhbmcuZXJyb3IubG93ZXN0UHggKyB3aWR0aCArICIqIiArIGhlaWdodDsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHJhdGlvID4gblJhdGlvKSB7CiAgICAgICAgICBoID0gdyAvIG5SYXRpbzsKICAgICAgICAgIHkgPSAoc2ltLmhlaWdodCAtIGgpIC8gMjsKICAgICAgICB9CiAgICAgICAgaWYgKHJhdGlvIDwgblJhdGlvKSB7CiAgICAgICAgICB3ID0gaCAqIG5SYXRpbzsKICAgICAgICAgIHggPSAoc2ltLndpZHRoIC0gdykgLyAyOwogICAgICAgIH0KICAgICAgICBzY2FsZS5yYW5nZSA9IDA7CiAgICAgICAgc2NhbGUueCA9IHg7CiAgICAgICAgc2NhbGUueSA9IHk7CiAgICAgICAgc2NhbGUud2lkdGggPSB3OwogICAgICAgIHNjYWxlLmhlaWdodCA9IGg7CiAgICAgICAgc2NhbGUuZGVncmVlID0gMDsKICAgICAgICBzY2FsZS5taW5XaWR0aCA9IHc7CiAgICAgICAgc2NhbGUubWluSGVpZ2h0ID0gaDsKICAgICAgICBzY2FsZS5tYXhXaWR0aCA9IG5XaWR0aCAqIHNpbS5zY2FsZTsKICAgICAgICBzY2FsZS5tYXhIZWlnaHQgPSBuSGVpZ2h0ICogc2ltLnNjYWxlOwogICAgICAgIHNjYWxlLm5hdHVyYWxXaWR0aCA9IG5XaWR0aDsKICAgICAgICBzY2FsZS5uYXR1cmFsSGVpZ2h0ID0gbkhlaWdodDsKICAgICAgICB0aGlzLnNvdXJjZUltZyA9IGltZzsKICAgICAgICB0aGlzLmNyZWF0ZUltZygpOwogICAgICAgIHRoaXMuc2V0U3RlcCgyKTsKICAgICAgfTsKICAgIH0sCiAgICAvLyDpvKDmoIfmjInkuIvlm77niYflh4blpIfnp7vliqgKICAgIGltZ1N0YXJ0TW92ZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgLy8g5pSv5oyB6Kem5pG45LqL5Lu277yM5YiZ6byg5qCH5LqL5Lu25peg5pWICiAgICAgIGlmICh0aGlzLmlzU3VwcG9ydFRvdWNoICYmICFlLnRhcmdldFRvdWNoZXMpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgY29uc3QgZXQgPSBlLnRhcmdldFRvdWNoZXMgPyBlLnRhcmdldFRvdWNoZXNbMF0gOiBlOwogICAgICBjb25zdCB7IHNvdXJjZUltZ01vdXNlRG93biwgc2NhbGUgfSA9IHRoaXM7CiAgICAgIGNvbnN0IHNpbWQgPSBzb3VyY2VJbWdNb3VzZURvd247CiAgICAgIHNpbWQubVggPSBldC5zY3JlZW5YOwogICAgICBzaW1kLm1ZID0gZXQuc2NyZWVuWTsKICAgICAgc2ltZC54ID0gc2NhbGUueDsKICAgICAgc2ltZC55ID0gc2NhbGUueTsKICAgICAgc2ltZC5vbiA9IHRydWU7CiAgICB9LAogICAgLy8g6byg5qCH5oyJ5LiL54q25oCB5LiL56e75Yqo77yM5Zu+54mH56e75YqoCiAgICBpbWdNb3ZlKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAvLyDmlK/mjIHop6bmkbjkuovku7bvvIzliJnpvKDmoIfkuovku7bml6DmlYgKICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0VG91Y2ggJiYgIWUudGFyZ2V0VG91Y2hlcykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCBldCA9IGUudGFyZ2V0VG91Y2hlcyA/IGUudGFyZ2V0VG91Y2hlc1swXSA6IGU7CiAgICAgIGNvbnN0IHsKICAgICAgICBzb3VyY2VJbWdNb3VzZURvd246IHsgb24sIG1YLCBtWSwgeCwgeSB9LAogICAgICAgIHNjYWxlLAogICAgICAgIHNvdXJjZUltZ01hc2tpbmcsCiAgICAgIH0gPSB0aGlzOwogICAgICBjb25zdCBzaW0gPSBzb3VyY2VJbWdNYXNraW5nOwogICAgICBjb25zdCBuWCA9IGV0LnNjcmVlblg7CiAgICAgIGNvbnN0IG5ZID0gZXQuc2NyZWVuWTsKICAgICAgY29uc3QgZFggPSBuWCAtIG1YOwogICAgICBjb25zdCBkWSA9IG5ZIC0gbVk7CiAgICAgIGxldCByWCA9IHggKyBkWDsKICAgICAgbGV0IHJZID0geSArIGRZOwogICAgICBpZiAoIW9uKSByZXR1cm47CiAgICAgIGlmIChyWCA+IDApIHsKICAgICAgICByWCA9IDA7CiAgICAgIH0KICAgICAgaWYgKHJZID4gMCkgewogICAgICAgIHJZID0gMDsKICAgICAgfQogICAgICBpZiAoclggPCBzaW0ud2lkdGggLSBzY2FsZS53aWR0aCkgewogICAgICAgIHJYID0gc2ltLndpZHRoIC0gc2NhbGUud2lkdGg7CiAgICAgIH0KICAgICAgaWYgKHJZIDwgc2ltLmhlaWdodCAtIHNjYWxlLmhlaWdodCkgewogICAgICAgIHJZID0gc2ltLmhlaWdodCAtIHNjYWxlLmhlaWdodDsKICAgICAgfQogICAgICBzY2FsZS54ID0gclg7CiAgICAgIHNjYWxlLnkgPSByWTsKICAgIH0sCiAgICAvLyDmjInpkq7mjInkuIvlvIDlp4vlkJHlj7Pml4vovawKICAgIHN0YXJ0Um90YXRlUmlnaHQoZSkgewogICAgICBjb25zdCB7IHNjYWxlIH0gPSB0aGlzOwogICAgICBzY2FsZS5yb3RhdGVSaWdodCA9IHRydWU7CiAgICAgIGNvbnN0IHJvdGF0ZSA9ICgpID0+IHsKICAgICAgICBpZiAoc2NhbGUucm90YXRlUmlnaHQpIHsKICAgICAgICAgIGNvbnN0IGRlZ3JlZSA9ICsrc2NhbGUuZGVncmVlOwogICAgICAgICAgdGhpcy5jcmVhdGVJbWcoZGVncmVlKTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByb3RhdGUoKTsKICAgICAgICAgIH0sIDYwKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJvdGF0ZSgpOwogICAgfSwKICAgIC8vIOaMiemSruaMieS4i+W8gOWni+WQkeW3puaXi+i9rAogICAgc3RhcnRSb3RhdGVMZWZ0KGUpIHsKICAgICAgY29uc3QgeyBzY2FsZSB9ID0gdGhpczsKICAgICAgc2NhbGUucm90YXRlTGVmdCA9IHRydWU7CiAgICAgIGNvbnN0IHJvdGF0ZSA9ICgpID0+IHsKICAgICAgICBpZiAoc2NhbGUucm90YXRlTGVmdCkgewogICAgICAgICAgY29uc3QgZGVncmVlID0gLS1zY2FsZS5kZWdyZWU7CiAgICAgICAgICB0aGlzLmNyZWF0ZUltZyhkZWdyZWUpOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJvdGF0ZSgpOwogICAgICAgICAgfSwgNjApOwogICAgICAgIH0KICAgICAgfTsKICAgICAgcm90YXRlKCk7CiAgICB9LAogICAgLy8g5YGc5q2i5peL6L2sCiAgICBlbmRSb3RhdGUoKSB7CiAgICAgIGNvbnN0IHsgc2NhbGUgfSA9IHRoaXM7CiAgICAgIHNjYWxlLnJvdGF0ZUxlZnQgPSBmYWxzZTsKICAgICAgc2NhbGUucm90YXRlUmlnaHQgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmjInpkq7mjInkuIvlvIDlp4vmlL7lpKcKICAgIHN0YXJ0Wm9vbUFkZChlKSB7CiAgICAgIGNvbnN0IHsgc2NhbGUgfSA9IHRoaXM7CiAgICAgIHNjYWxlLnpvb21BZGRPbiA9IHRydWU7CiAgICAgIGNvbnN0IHpvb20gPSAoKSA9PiB7CiAgICAgICAgaWYgKHNjYWxlLnpvb21BZGRPbikgewogICAgICAgICAgY29uc3QgcmFuZ2UgPSBzY2FsZS5yYW5nZSA+PSAxMDAgPyAxMDAgOiArK3NjYWxlLnJhbmdlOwogICAgICAgICAgdGhpcy56b29tSW1nKHJhbmdlKTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB6b29tKCk7CiAgICAgICAgICB9LCA2MCk7CiAgICAgICAgfQogICAgICB9OwogICAgICB6b29tKCk7CiAgICB9LAogICAgLy8g5oyJ6ZKu5p2+5byA5oiW56e75byA5Y+W5raI5pS+5aSnCiAgICBlbmRab29tQWRkKGUpIHsKICAgICAgdGhpcy5zY2FsZS56b29tQWRkT24gPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmjInpkq7mjInkuIvlvIDlp4vnvKnlsI8KICAgIHN0YXJ0Wm9vbVN1YihlKSB7CiAgICAgIGNvbnN0IHsgc2NhbGUgfSA9IHRoaXM7CiAgICAgIHNjYWxlLnpvb21TdWJPbiA9IHRydWU7CiAgICAgIGNvbnN0IHpvb20gPSAoKSA9PiB7CiAgICAgICAgaWYgKHNjYWxlLnpvb21TdWJPbikgewogICAgICAgICAgY29uc3QgcmFuZ2UgPSBzY2FsZS5yYW5nZSA8PSAwID8gMCA6IC0tc2NhbGUucmFuZ2U7CiAgICAgICAgICB0aGlzLnpvb21JbWcocmFuZ2UpOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHpvb20oKTsKICAgICAgICAgIH0sIDYwKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHpvb20oKTsKICAgIH0sCiAgICAvLyDmjInpkq7mnb7lvIDmiJbnp7vlvIDlj5bmtojnvKnlsI8KICAgIGVuZFpvb21TdWIoZSkgewogICAgICBjb25zdCB7IHNjYWxlIH0gPSB0aGlzOwogICAgICBzY2FsZS56b29tU3ViT24gPSBmYWxzZTsKICAgIH0sCiAgICB6b29tQ2hhbmdlKGUpIHsKICAgICAgdGhpcy56b29tSW1nKGUudGFyZ2V0LnZhbHVlKTsKICAgIH0sCiAgICAvLyDnvKnmlL7ljp/lm74KICAgIHpvb21JbWcobmV3UmFuZ2UpIHsKICAgICAgY29uc3QgeyBzb3VyY2VJbWdNYXNraW5nLCBzY2FsZSB9ID0gdGhpczsKICAgICAgY29uc3QgewogICAgICAgIG1heFdpZHRoLAogICAgICAgIG1heEhlaWdodCwKICAgICAgICBtaW5XaWR0aCwKICAgICAgICBtaW5IZWlnaHQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIHgsCiAgICAgICAgeSwKICAgICAgfSA9IHNjYWxlOwogICAgICBjb25zdCBzaW0gPSBzb3VyY2VJbWdNYXNraW5nOwogICAgICAvLyDokpnniYjlrr3pq5gKICAgICAgY29uc3Qgc1dpZHRoID0gc2ltLndpZHRoOwogICAgICBjb25zdCBzSGVpZ2h0ID0gc2ltLmhlaWdodDsKICAgICAgLy8g5paw5a696auYCiAgICAgIGNvbnN0IG5XaWR0aCA9IG1pbldpZHRoICsgKChtYXhXaWR0aCAtIG1pbldpZHRoKSAqIG5ld1JhbmdlKSAvIDEwMDsKICAgICAgY29uc3QgbkhlaWdodCA9IG1pbkhlaWdodCArICgobWF4SGVpZ2h0IC0gbWluSGVpZ2h0KSAqIG5ld1JhbmdlKSAvIDEwMDsKICAgICAgLy8g5paw5Z2Q5qCH77yI5qC55o2u6JKZ54mI5Lit5b+D54K557yp5pS+77yJCiAgICAgIGxldCBuWCA9IHNXaWR0aCAvIDIgLSAobldpZHRoIC8gd2lkdGgpICogKHNXaWR0aCAvIDIgLSB4KTsKICAgICAgbGV0IG5ZID0gc0hlaWdodCAvIDIgLSAobkhlaWdodCAvIGhlaWdodCkgKiAoc0hlaWdodCAvIDIgLSB5KTsKICAgICAgLy8g5Yik5pat5paw5Z2Q5qCH5piv5ZCm6LaF6L+H6JKZ54mI6ZmQ5Yi2CiAgICAgIGlmIChuWCA+IDApIHsKICAgICAgICBuWCA9IDA7CiAgICAgIH0KICAgICAgaWYgKG5ZID4gMCkgewogICAgICAgIG5ZID0gMDsKICAgICAgfQogICAgICBpZiAoblggPCBzV2lkdGggLSBuV2lkdGgpIHsKICAgICAgICBuWCA9IHNXaWR0aCAtIG5XaWR0aDsKICAgICAgfQogICAgICBpZiAoblkgPCBzSGVpZ2h0IC0gbkhlaWdodCkgewogICAgICAgIG5ZID0gc0hlaWdodCAtIG5IZWlnaHQ7CiAgICAgIH0KICAgICAgLy8g6LWL5YC85aSE55CGCiAgICAgIHNjYWxlLnggPSBuWDsKICAgICAgc2NhbGUueSA9IG5ZOwogICAgICBzY2FsZS53aWR0aCA9IG5XaWR0aDsKICAgICAgc2NhbGUuaGVpZ2h0ID0gbkhlaWdodDsKICAgICAgc2NhbGUucmFuZ2UgPSBuZXdSYW5nZTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKHNjYWxlLnJhbmdlID09PSBuZXdSYW5nZSkgewogICAgICAgICAgdGhpcy5jcmVhdGVJbWcoKTsKICAgICAgICB9CiAgICAgIH0sIDMwMCk7CiAgICB9LAogICAgLy8g55Sf5oiQ6ZyA5rGC5Zu+54mHCiAgICBjcmVhdGVJbWcoZSkgewogICAgICBjb25zdCB7CiAgICAgICAgbWltZSwKICAgICAgICBzb3VyY2VJbWcsCiAgICAgICAgc2NhbGU6IHsgeCwgeSwgd2lkdGgsIGhlaWdodCwgZGVncmVlIH0sCiAgICAgICAgc291cmNlSW1nTWFza2luZzogeyBzY2FsZSB9LAogICAgICB9ID0gdGhpczsKICAgICAgY29uc3QgY2FudmFzID0gdGhpcy4kcmVmcy5jYW52YXM7CiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICBpZiAoZSkgewogICAgICAgIC8vIOWPlua2iOm8oOagh+aMieS4i+enu+WKqOeKtuaAgQogICAgICAgIHRoaXMuc291cmNlSW1nTW91c2VEb3duLm9uID0gZmFsc2U7CiAgICAgIH0KICAgICAgY2FudmFzLndpZHRoID0gdGhpcy53aWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0OwogICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsKICAgICAgLy8g5bCG6YCP5piO5Yy65Z+f6K6+572u5Li655m96Imy5bqV6L65CiAgICAgIGN0eC5maWxsU3R5bGUgPSAiI2ZmZiI7CiAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7CiAgICAgIGN0eC50cmFuc2xhdGUodGhpcy53aWR0aCAqIDAuNSwgdGhpcy5oZWlnaHQgKiAwLjUpOwogICAgICBjdHgucm90YXRlKChNYXRoLlBJICogZGVncmVlKSAvIDE4MCk7CiAgICAgIGN0eC50cmFuc2xhdGUoLXRoaXMud2lkdGggKiAwLjUsIC10aGlzLmhlaWdodCAqIDAuNSk7CiAgICAgIGN0eC5kcmF3SW1hZ2UoCiAgICAgICAgc291cmNlSW1nLAogICAgICAgIHggLyBzY2FsZSwKICAgICAgICB5IC8gc2NhbGUsCiAgICAgICAgd2lkdGggLyBzY2FsZSwKICAgICAgICBoZWlnaHQgLyBzY2FsZQogICAgICApOwogICAgICB0aGlzLmNyZWF0ZUltZ1VybCA9IGNhbnZhcy50b0RhdGFVUkwobWltZSk7CiAgICB9LAogICAgcHJlcGFyZVVwbG9hZCgpIHsKICAgICAgY29uc3QgeyB1cmwsIGNyZWF0ZUltZ1VybCwgZmllbGQsIGtpIH0gPSB0aGlzOwogICAgICB0aGlzLiRlbWl0KCJjcm9wLXN1Y2Nlc3MiLCBjcmVhdGVJbWdVcmwsIGZpZWxkLCBraSk7CiAgICAgIGlmICh0eXBlb2YgdXJsID09PSAic3RyaW5nIiAmJiB1cmwpIHsKICAgICAgICB0aGlzLnVwbG9hZCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub2ZmKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDkuIrkvKDlm77niYcKICAgIHVwbG9hZCgpIHsKICAgICAgY29uc3QgewogICAgICAgIGxhbmcsCiAgICAgICAgaW1nRm9ybWF0LAogICAgICAgIG1pbWUsCiAgICAgICAgdXJsLAogICAgICAgIHBhcmFtcywKICAgICAgICBmaWVsZCwKICAgICAgICBraSwKICAgICAgICBjcmVhdGVJbWdVcmwsCiAgICAgIH0gPSB0aGlzOwogICAgICBjb25zdCBmbURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm1EYXRhLmFwcGVuZCgKICAgICAgICBmaWVsZCwKICAgICAgICBkYXRhMmJsb2IoY3JlYXRlSW1nVXJsLCBtaW1lKSwKICAgICAgICBmaWVsZCArICIuIiArIGltZ0Zvcm1hdAogICAgICApOwogICAgICAvLyDmt7vliqDlhbbku5blj4LmlbAKICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICJvYmplY3QiICYmIHBhcmFtcykgewogICAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaCgoaykgPT4gewogICAgICAgICAgZm1EYXRhLmFwcGVuZChrLCBwYXJhbXNba10pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIOebkeWQrOi/m+W6puWbnuiwgwogICAgICAvLyBjb25zdCB1cGxvYWRQcm9ncmVzcyA9IChldmVudCkgPT4gewogICAgICAvLyAgIGlmIChldmVudC5sZW5ndGhDb21wdXRhYmxlKSB7CiAgICAgIC8vICAgICB0aGlzLnByb2dyZXNzID0gMTAwICogTWF0aC5yb3VuZChldmVudC5sb2FkZWQpIC8gZXZlbnQudG90YWwKICAgICAgLy8gICB9CiAgICAgIC8vIH0KICAgICAgLy8g5LiK5Lyg5paH5Lu2CiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgdGhpcy5sb2FkaW5nID0gMTsKICAgICAgdGhpcy5zZXRTdGVwKDMpOwogICAgICByZXF1ZXN0KHsKICAgICAgICB1cmwsCiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgZGF0YTogZm1EYXRhLAogICAgICB9KQogICAgICAgIC50aGVuKChyZXNEYXRhKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSAyOwogICAgICAgICAgdGhpcy4kZW1pdCgiY3JvcC11cGxvYWQtc3VjY2VzcyIsIHJlc0RhdGEuZGF0YSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgaWYgKHRoaXMudmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gMzsKICAgICAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSBsYW5nLmZhaWw7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImNyb3AtdXBsb2FkLWZhaWwiLCBlcnIsIGZpZWxkLCBraSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgY2xvc2VIYW5kbGVyKGUpIHsKICAgICAgaWYgKHRoaXMudmFsdWUgJiYgKGUua2V5ID09PSAiRXNjYXBlIiB8fCBlLmtleUNvZGUgPT09IDI3KSkgewogICAgICAgIHRoaXMub2ZmKCk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ImageCropper","sourcesContent":["<template>\n  <div v-show=\"value\" class=\"vue-image-crop-upload\">\n    <div class=\"vicp-wrap\">\n      <div class=\"vicp-close\" @click=\"off\">\n        <i class=\"vicp-icon4\" />\n      </div>\n\n      <div v-show=\"step == 1\" class=\"vicp-step1\">\n        <div\n          class=\"vicp-drop-area\"\n          @dragleave=\"preventDefault\"\n          @dragover=\"preventDefault\"\n          @dragenter=\"preventDefault\"\n          @click=\"handleClick\"\n          @drop=\"handleChange\"\n        >\n          <i v-show=\"loading != 1\" class=\"vicp-icon1\">\n            <i class=\"vicp-icon1-arrow\" />\n            <i class=\"vicp-icon1-body\" />\n            <i class=\"vicp-icon1-bottom\" />\n          </i>\n          <span v-show=\"loading !== 1\" class=\"vicp-hint\">{{ lang.hint }}</span>\n          <span v-show=\"!isSupported\" class=\"vicp-no-supported-hint\">{{\n            lang.noSupported\n          }}</span>\n          <input\n            v-show=\"false\"\n            v-if=\"step == 1\"\n            ref=\"fileinput\"\n            type=\"file\"\n            @change=\"handleChange\"\n          />\n        </div>\n        <div v-show=\"hasError\" class=\"vicp-error\">\n          <i class=\"vicp-icon2\" />\n          {{ errorMsg }}\n        </div>\n        <div class=\"vicp-operate\">\n          <a @click=\"off\" @mousedown=\"ripple\">{{ lang.btn.off }}</a>\n        </div>\n      </div>\n\n      <div v-if=\"step == 2\" class=\"vicp-step2\">\n        <div class=\"vicp-crop\">\n          <div v-show=\"true\" class=\"vicp-crop-left\">\n            <div class=\"vicp-img-container\">\n              <img\n                ref=\"img\"\n                :src=\"sourceImgUrl\"\n                :style=\"sourceImgStyle\"\n                class=\"vicp-img\"\n                draggable=\"false\"\n                @drag=\"preventDefault\"\n                @dragstart=\"preventDefault\"\n                @dragend=\"preventDefault\"\n                @dragleave=\"preventDefault\"\n                @dragover=\"preventDefault\"\n                @dragenter=\"preventDefault\"\n                @drop=\"preventDefault\"\n                @touchstart=\"imgStartMove\"\n                @touchmove=\"imgMove\"\n                @touchend=\"createImg\"\n                @touchcancel=\"createImg\"\n                @mousedown=\"imgStartMove\"\n                @mousemove=\"imgMove\"\n                @mouseup=\"createImg\"\n                @mouseout=\"createImg\"\n              />\n              <div\n                :style=\"sourceImgShadeStyle\"\n                class=\"vicp-img-shade vicp-img-shade-1\"\n              />\n              <div\n                :style=\"sourceImgShadeStyle\"\n                class=\"vicp-img-shade vicp-img-shade-2\"\n              />\n            </div>\n\n            <div class=\"vicp-range\">\n              <input\n                :value=\"scale.range\"\n                type=\"range\"\n                step=\"1\"\n                min=\"0\"\n                max=\"100\"\n                @input=\"zoomChange\"\n              />\n              <i\n                class=\"vicp-icon5\"\n                @mousedown=\"startZoomSub\"\n                @mouseout=\"endZoomSub\"\n                @mouseup=\"endZoomSub\"\n              />\n              <i\n                class=\"vicp-icon6\"\n                @mousedown=\"startZoomAdd\"\n                @mouseout=\"endZoomAdd\"\n                @mouseup=\"endZoomAdd\"\n              />\n            </div>\n\n            <div v-if=\"!noRotate\" class=\"vicp-rotate\">\n              <i\n                @mousedown=\"startRotateLeft\"\n                @mouseout=\"endRotate\"\n                @mouseup=\"endRotate\"\n                >↺</i\n              >\n              <i\n                @mousedown=\"startRotateRight\"\n                @mouseout=\"endRotate\"\n                @mouseup=\"endRotate\"\n                >↻</i\n              >\n            </div>\n          </div>\n          <div v-show=\"true\" class=\"vicp-crop-right\">\n            <div class=\"vicp-preview\">\n              <div v-if=\"!noSquare\" class=\"vicp-preview-item\">\n                <img :src=\"createImgUrl\" :style=\"previewStyle\" />\n                <span>{{ lang.preview }}</span>\n              </div>\n              <div\n                v-if=\"!noCircle\"\n                class=\"vicp-preview-item vicp-preview-item-circle\"\n              >\n                <img :src=\"createImgUrl\" :style=\"previewStyle\" />\n                <span>{{ lang.preview }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"vicp-operate\">\n          <a @click=\"setStep(1)\" @mousedown=\"ripple\">{{ lang.btn.back }}</a>\n          <a\n            class=\"vicp-operate-btn\"\n            @click=\"prepareUpload\"\n            @mousedown=\"ripple\"\n            >{{ lang.btn.save }}</a\n          >\n        </div>\n      </div>\n\n      <div v-if=\"step == 3\" class=\"vicp-step3\">\n        <div class=\"vicp-upload\">\n          <span v-show=\"loading === 1\" class=\"vicp-loading\">{{\n            lang.loading\n          }}</span>\n          <div class=\"vicp-progress-wrap\">\n            <span\n              v-show=\"loading === 1\"\n              :style=\"progressStyle\"\n              class=\"vicp-progress\"\n            />\n          </div>\n          <div v-show=\"hasError\" class=\"vicp-error\">\n            <i class=\"vicp-icon2\" />\n            {{ errorMsg }}\n          </div>\n          <div v-show=\"loading === 2\" class=\"vicp-success\">\n            <i class=\"vicp-icon3\" />\n            {{ lang.success }}\n          </div>\n        </div>\n        <div class=\"vicp-operate\">\n          <a @click=\"setStep(2)\" @mousedown=\"ripple\">{{ lang.btn.back }}</a>\n          <a @click=\"off\" @mousedown=\"ripple\">{{ lang.btn.close }}</a>\n        </div>\n      </div>\n      <canvas v-show=\"false\" ref=\"canvas\" :width=\"width\" :height=\"height\" />\n    </div>\n  </div>\n</template>\n\n<script>\n\"use strict\";\nimport request from \"@/utils/request\";\nimport language from \"./utils/language.js\";\nimport mimes from \"./utils/mimes.js\";\nimport data2blob from \"./utils/data2blob.js\";\nimport effectRipple from \"./utils/effectRipple.js\";\nexport default {\n  props: {\n    // 域，上传文件name，触发事件会带上（如果一个页面多个图片上传控件，可以做区分\n    field: {\n      type: String,\n      default: \"avatar\",\n    },\n    // 原名key，类似于id，触发事件会带上（如果一个页面多个图片上传控件，可以做区分\n    ki: {\n      type: Number,\n      default: 0,\n    },\n    // 显示该控件与否\n    value: {\n      type: Boolean,\n      default: true,\n    },\n    // 上传地址\n    url: {\n      type: String,\n      default: \"\",\n    },\n    // 其他要上传文件附带的数据，对象格式\n    params: {\n      type: Object,\n      default: null,\n    },\n    // Add custom headers\n    headers: {\n      type: Object,\n      default: null,\n    },\n    // 剪裁图片的宽\n    width: {\n      type: Number,\n      default: 200,\n    },\n    // 剪裁图片的高\n    height: {\n      type: Number,\n      default: 200,\n    },\n    // 不显示旋转功能\n    noRotate: {\n      type: Boolean,\n      default: true,\n    },\n    // 不预览圆形图片\n    noCircle: {\n      type: Boolean,\n      default: false,\n    },\n    // 不预览方形图片\n    noSquare: {\n      type: Boolean,\n      default: false,\n    },\n    // 单文件大小限制\n    maxSize: {\n      type: Number,\n      default: 10240,\n    },\n    // 语言类型\n    langType: {\n      type: String,\n      default: \"zh\",\n    },\n    // 语言包\n    langExt: {\n      type: Object,\n      default: null,\n    },\n    // 图片上传格式\n    imgFormat: {\n      type: String,\n      default: \"png\",\n    },\n    // 是否支持跨域\n    withCredentials: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    const { imgFormat, langType, langExt, width, height } = this;\n    let isSupported = true;\n    const allowImgFormat = [\"jpg\", \"png\"];\n    const tempImgFormat =\n      allowImgFormat.indexOf(imgFormat) === -1 ? \"jpg\" : imgFormat;\n    const lang = language[langType] ? language[langType] : language[\"en\"];\n    const mime = mimes[tempImgFormat];\n    // 规范图片格式\n    this.imgFormat = tempImgFormat;\n    if (langExt) {\n      Object.assign(lang, langExt);\n    }\n    if (typeof FormData !== \"function\") {\n      isSupported = false;\n    }\n    return {\n      // 图片的mime\n      mime,\n      // 语言包\n      lang,\n      // 浏览器是否支持该控件\n      isSupported,\n      // 浏览器是否支持触屏事件\n      // eslint-disable-next-line no-prototype-builtins\n      isSupportTouch: document.hasOwnProperty(\"ontouchstart\"),\n      // 步骤\n      step: 1, // 1选择文件 2剪裁 3上传\n      // 上传状态及进度\n      loading: 0, // 0未开始 1正在 2成功 3错误\n      progress: 0,\n      // 是否有错误及错误信息\n      hasError: false,\n      errorMsg: \"\",\n      // 需求图宽高比\n      ratio: width / height,\n      // 原图地址、生成图片地址\n      sourceImg: null,\n      sourceImgUrl: \"\",\n      createImgUrl: \"\",\n      // 原图片拖动事件初始值\n      sourceImgMouseDown: {\n        on: false,\n        mX: 0, // 鼠标按下的坐标\n        mY: 0,\n        x: 0, // scale原图坐标\n        y: 0,\n      },\n      // 生成图片预览的容器大小\n      previewContainer: {\n        width: 100,\n        height: 100,\n      },\n      // 原图容器宽高\n      sourceImgContainer: {\n        // sic\n        width: 240,\n        height: 184, // 如果生成图比例与此一致会出现bug，先改成特殊的格式吧，哈哈哈\n      },\n      // 原图展示属性\n      scale: {\n        zoomAddOn: false, // 按钮缩放事件开启\n        zoomSubOn: false, // 按钮缩放事件开启\n        range: 1, // 最大100\n        rotateLeft: false, // 按钮向左旋转事件开启\n        rotateRight: false, // 按钮向右旋转事件开启\n        degree: 0, // 旋转度数\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        maxWidth: 0,\n        maxHeight: 0,\n        minWidth: 0, // 最宽\n        minHeight: 0,\n        naturalWidth: 0, // 原宽\n        naturalHeight: 0,\n      },\n    };\n  },\n  computed: {\n    // 进度条样式\n    progressStyle() {\n      const { progress } = this;\n      return {\n        width: progress + \"%\",\n      };\n    },\n    // 原图样式\n    sourceImgStyle() {\n      const { scale, sourceImgMasking } = this;\n      const top = scale.y + sourceImgMasking.y + \"px\";\n      const left = scale.x + sourceImgMasking.x + \"px\";\n      return {\n        top,\n        left,\n        width: scale.width + \"px\",\n        height: scale.height + \"px\",\n        transform: \"rotate(\" + scale.degree + \"deg)\", // 旋转时 左侧原始图旋转样式\n        \"-ms-transform\": \"rotate(\" + scale.degree + \"deg)\", // 兼容IE9\n        \"-moz-transform\": \"rotate(\" + scale.degree + \"deg)\", // 兼容FireFox\n        \"-webkit-transform\": \"rotate(\" + scale.degree + \"deg)\", // 兼容Safari 和 chrome\n        \"-o-transform\": \"rotate(\" + scale.degree + \"deg)\", // 兼容 Opera\n      };\n    },\n    // 原图蒙版属性\n    sourceImgMasking() {\n      const { width, height, ratio, sourceImgContainer } = this;\n      const sic = sourceImgContainer;\n      const sicRatio = sic.width / sic.height; // 原图容器宽高比\n      let x = 0;\n      let y = 0;\n      let w = sic.width;\n      let h = sic.height;\n      let scale = 1;\n      if (ratio < sicRatio) {\n        scale = sic.height / height;\n        w = sic.height * ratio;\n        x = (sic.width - w) / 2;\n      }\n      if (ratio > sicRatio) {\n        scale = sic.width / width;\n        h = sic.width / ratio;\n        y = (sic.height - h) / 2;\n      }\n      return {\n        scale, // 蒙版相对需求宽高的缩放\n        x,\n        y,\n        width: w,\n        height: h,\n      };\n    },\n    // 原图遮罩样式\n    sourceImgShadeStyle() {\n      const { sourceImgMasking, sourceImgContainer } = this;\n      const sic = sourceImgContainer;\n      const sim = sourceImgMasking;\n      const w =\n        sim.width === sic.width ? sim.width : (sic.width - sim.width) / 2;\n      const h =\n        sim.height === sic.height ? sim.height : (sic.height - sim.height) / 2;\n      return {\n        width: w + \"px\",\n        height: h + \"px\",\n      };\n    },\n    previewStyle() {\n      const { ratio, previewContainer } = this;\n      const pc = previewContainer;\n      let w = pc.width;\n      let h = pc.height;\n      const pcRatio = w / h;\n      if (ratio < pcRatio) {\n        w = pc.height * ratio;\n      }\n      if (ratio > pcRatio) {\n        h = pc.width / ratio;\n      }\n      return {\n        width: w + \"px\",\n        height: h + \"px\",\n      };\n    },\n  },\n  watch: {\n    value(newValue) {\n      if (newValue && this.loading !== 1) {\n        this.reset();\n      }\n    },\n  },\n  created() {\n    // 绑定按键esc隐藏此插件事件\n    document.addEventListener(\"keyup\", this.closeHandler);\n  },\n  destroyed() {\n    document.removeEventListener(\"keyup\", this.closeHandler);\n  },\n  methods: {\n    // 点击波纹效果\n    ripple(e) {\n      effectRipple(e);\n    },\n    // 关闭控件\n    off() {\n      setTimeout(() => {\n        this.$emit(\"input\", false);\n        this.$emit(\"close\");\n        if (this.step === 3 && this.loading === 2) {\n          this.setStep(1);\n        }\n      }, 200);\n    },\n    // 设置步骤\n    setStep(no) {\n      // 延时是为了显示动画效果呢，哈哈哈\n      setTimeout(() => {\n        this.step = no;\n      }, 200);\n    },\n    /* 图片选择区域函数绑定\n     ---------------------------------------------------------------*/\n    preventDefault(e) {\n      e.preventDefault();\n      return false;\n    },\n    handleClick(e) {\n      if (this.loading !== 1) {\n        if (e.target !== this.$refs.fileinput) {\n          e.preventDefault();\n          if (document.activeElement !== this.$refs) {\n            this.$refs.fileinput.click();\n          }\n        }\n      }\n    },\n    handleChange(e) {\n      e.preventDefault();\n      if (this.loading !== 1) {\n        const files = e.target.files || e.dataTransfer.files;\n        this.reset();\n        if (this.checkFile(files[0])) {\n          this.setSourceImg(files[0]);\n        }\n      }\n    },\n    /* ---------------------------------------------------------------*/\n    // 检测选择的文件是否合适\n    checkFile(file) {\n      const { lang, maxSize } = this;\n      // 仅限图片\n      if (file.type.indexOf(\"image\") === -1) {\n        this.hasError = true;\n        this.errorMsg = lang.error.onlyImg;\n        return false;\n      }\n      // 超出大小\n      if (file.size / 1024 > maxSize) {\n        this.hasError = true;\n        this.errorMsg = lang.error.outOfSize + maxSize + \"kb\";\n        return false;\n      }\n      return true;\n    },\n    // 重置控件\n    reset() {\n      this.loading = 0;\n      this.hasError = false;\n      this.errorMsg = \"\";\n      this.progress = 0;\n    },\n    // 设置图片源\n    setSourceImg(file) {\n      const fr = new FileReader();\n      fr.onload = (e) => {\n        this.sourceImgUrl = fr.result;\n        this.startCrop();\n      };\n      fr.readAsDataURL(file);\n    },\n    // 剪裁前准备工作\n    startCrop() {\n      const {\n        width,\n        height,\n        ratio,\n        scale,\n        sourceImgUrl,\n        sourceImgMasking,\n        lang,\n      } = this;\n      const sim = sourceImgMasking;\n      const img = new Image();\n      img.src = sourceImgUrl;\n      img.onload = () => {\n        const nWidth = img.naturalWidth;\n        const nHeight = img.naturalHeight;\n        const nRatio = nWidth / nHeight;\n        let w = sim.width;\n        let h = sim.height;\n        let x = 0;\n        let y = 0;\n        // 图片像素不达标\n        if (nWidth < width || nHeight < height) {\n          this.hasError = true;\n          this.errorMsg = lang.error.lowestPx + width + \"*\" + height;\n          return false;\n        }\n        if (ratio > nRatio) {\n          h = w / nRatio;\n          y = (sim.height - h) / 2;\n        }\n        if (ratio < nRatio) {\n          w = h * nRatio;\n          x = (sim.width - w) / 2;\n        }\n        scale.range = 0;\n        scale.x = x;\n        scale.y = y;\n        scale.width = w;\n        scale.height = h;\n        scale.degree = 0;\n        scale.minWidth = w;\n        scale.minHeight = h;\n        scale.maxWidth = nWidth * sim.scale;\n        scale.maxHeight = nHeight * sim.scale;\n        scale.naturalWidth = nWidth;\n        scale.naturalHeight = nHeight;\n        this.sourceImg = img;\n        this.createImg();\n        this.setStep(2);\n      };\n    },\n    // 鼠标按下图片准备移动\n    imgStartMove(e) {\n      e.preventDefault();\n      // 支持触摸事件，则鼠标事件无效\n      if (this.isSupportTouch && !e.targetTouches) {\n        return false;\n      }\n      const et = e.targetTouches ? e.targetTouches[0] : e;\n      const { sourceImgMouseDown, scale } = this;\n      const simd = sourceImgMouseDown;\n      simd.mX = et.screenX;\n      simd.mY = et.screenY;\n      simd.x = scale.x;\n      simd.y = scale.y;\n      simd.on = true;\n    },\n    // 鼠标按下状态下移动，图片移动\n    imgMove(e) {\n      e.preventDefault();\n      // 支持触摸事件，则鼠标事件无效\n      if (this.isSupportTouch && !e.targetTouches) {\n        return false;\n      }\n      const et = e.targetTouches ? e.targetTouches[0] : e;\n      const {\n        sourceImgMouseDown: { on, mX, mY, x, y },\n        scale,\n        sourceImgMasking,\n      } = this;\n      const sim = sourceImgMasking;\n      const nX = et.screenX;\n      const nY = et.screenY;\n      const dX = nX - mX;\n      const dY = nY - mY;\n      let rX = x + dX;\n      let rY = y + dY;\n      if (!on) return;\n      if (rX > 0) {\n        rX = 0;\n      }\n      if (rY > 0) {\n        rY = 0;\n      }\n      if (rX < sim.width - scale.width) {\n        rX = sim.width - scale.width;\n      }\n      if (rY < sim.height - scale.height) {\n        rY = sim.height - scale.height;\n      }\n      scale.x = rX;\n      scale.y = rY;\n    },\n    // 按钮按下开始向右旋转\n    startRotateRight(e) {\n      const { scale } = this;\n      scale.rotateRight = true;\n      const rotate = () => {\n        if (scale.rotateRight) {\n          const degree = ++scale.degree;\n          this.createImg(degree);\n          setTimeout(function () {\n            rotate();\n          }, 60);\n        }\n      };\n      rotate();\n    },\n    // 按钮按下开始向左旋转\n    startRotateLeft(e) {\n      const { scale } = this;\n      scale.rotateLeft = true;\n      const rotate = () => {\n        if (scale.rotateLeft) {\n          const degree = --scale.degree;\n          this.createImg(degree);\n          setTimeout(function () {\n            rotate();\n          }, 60);\n        }\n      };\n      rotate();\n    },\n    // 停止旋转\n    endRotate() {\n      const { scale } = this;\n      scale.rotateLeft = false;\n      scale.rotateRight = false;\n    },\n    // 按钮按下开始放大\n    startZoomAdd(e) {\n      const { scale } = this;\n      scale.zoomAddOn = true;\n      const zoom = () => {\n        if (scale.zoomAddOn) {\n          const range = scale.range >= 100 ? 100 : ++scale.range;\n          this.zoomImg(range);\n          setTimeout(function () {\n            zoom();\n          }, 60);\n        }\n      };\n      zoom();\n    },\n    // 按钮松开或移开取消放大\n    endZoomAdd(e) {\n      this.scale.zoomAddOn = false;\n    },\n    // 按钮按下开始缩小\n    startZoomSub(e) {\n      const { scale } = this;\n      scale.zoomSubOn = true;\n      const zoom = () => {\n        if (scale.zoomSubOn) {\n          const range = scale.range <= 0 ? 0 : --scale.range;\n          this.zoomImg(range);\n          setTimeout(function () {\n            zoom();\n          }, 60);\n        }\n      };\n      zoom();\n    },\n    // 按钮松开或移开取消缩小\n    endZoomSub(e) {\n      const { scale } = this;\n      scale.zoomSubOn = false;\n    },\n    zoomChange(e) {\n      this.zoomImg(e.target.value);\n    },\n    // 缩放原图\n    zoomImg(newRange) {\n      const { sourceImgMasking, scale } = this;\n      const {\n        maxWidth,\n        maxHeight,\n        minWidth,\n        minHeight,\n        width,\n        height,\n        x,\n        y,\n      } = scale;\n      const sim = sourceImgMasking;\n      // 蒙版宽高\n      const sWidth = sim.width;\n      const sHeight = sim.height;\n      // 新宽高\n      const nWidth = minWidth + ((maxWidth - minWidth) * newRange) / 100;\n      const nHeight = minHeight + ((maxHeight - minHeight) * newRange) / 100;\n      // 新坐标（根据蒙版中心点缩放）\n      let nX = sWidth / 2 - (nWidth / width) * (sWidth / 2 - x);\n      let nY = sHeight / 2 - (nHeight / height) * (sHeight / 2 - y);\n      // 判断新坐标是否超过蒙版限制\n      if (nX > 0) {\n        nX = 0;\n      }\n      if (nY > 0) {\n        nY = 0;\n      }\n      if (nX < sWidth - nWidth) {\n        nX = sWidth - nWidth;\n      }\n      if (nY < sHeight - nHeight) {\n        nY = sHeight - nHeight;\n      }\n      // 赋值处理\n      scale.x = nX;\n      scale.y = nY;\n      scale.width = nWidth;\n      scale.height = nHeight;\n      scale.range = newRange;\n      setTimeout(() => {\n        if (scale.range === newRange) {\n          this.createImg();\n        }\n      }, 300);\n    },\n    // 生成需求图片\n    createImg(e) {\n      const {\n        mime,\n        sourceImg,\n        scale: { x, y, width, height, degree },\n        sourceImgMasking: { scale },\n      } = this;\n      const canvas = this.$refs.canvas;\n      const ctx = canvas.getContext(\"2d\");\n      if (e) {\n        // 取消鼠标按下移动状态\n        this.sourceImgMouseDown.on = false;\n      }\n      canvas.width = this.width;\n      canvas.height = this.height;\n      ctx.clearRect(0, 0, this.width, this.height);\n      // 将透明区域设置为白色底边\n      ctx.fillStyle = \"#fff\";\n      ctx.fillRect(0, 0, this.width, this.height);\n      ctx.translate(this.width * 0.5, this.height * 0.5);\n      ctx.rotate((Math.PI * degree) / 180);\n      ctx.translate(-this.width * 0.5, -this.height * 0.5);\n      ctx.drawImage(\n        sourceImg,\n        x / scale,\n        y / scale,\n        width / scale,\n        height / scale\n      );\n      this.createImgUrl = canvas.toDataURL(mime);\n    },\n    prepareUpload() {\n      const { url, createImgUrl, field, ki } = this;\n      this.$emit(\"crop-success\", createImgUrl, field, ki);\n      if (typeof url === \"string\" && url) {\n        this.upload();\n      } else {\n        this.off();\n      }\n    },\n    // 上传图片\n    upload() {\n      const {\n        lang,\n        imgFormat,\n        mime,\n        url,\n        params,\n        field,\n        ki,\n        createImgUrl,\n      } = this;\n      const fmData = new FormData();\n      fmData.append(\n        field,\n        data2blob(createImgUrl, mime),\n        field + \".\" + imgFormat\n      );\n      // 添加其他参数\n      if (typeof params === \"object\" && params) {\n        Object.keys(params).forEach((k) => {\n          fmData.append(k, params[k]);\n        });\n      }\n      // 监听进度回调\n      // const uploadProgress = (event) => {\n      //   if (event.lengthComputable) {\n      //     this.progress = 100 * Math.round(event.loaded) / event.total\n      //   }\n      // }\n      // 上传文件\n      this.reset();\n      this.loading = 1;\n      this.setStep(3);\n      request({\n        url,\n        method: \"post\",\n        data: fmData,\n      })\n        .then((resData) => {\n          this.loading = 2;\n          this.$emit(\"crop-upload-success\", resData.data);\n        })\n        .catch((err) => {\n          if (this.value) {\n            this.loading = 3;\n            this.hasError = true;\n            this.errorMsg = lang.fail;\n            this.$emit(\"crop-upload-fail\", err, field, ki);\n          }\n        });\n    },\n    closeHandler(e) {\n      if (this.value && (e.key === \"Escape\" || e.keyCode === 27)) {\n        this.off();\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@charset \"UTF-8\";\n@-webkit-keyframes vicp_progress {\n  0% {\n    background-position-y: 0;\n  }\n  100% {\n    background-position-y: 40px;\n  }\n}\n@keyframes vicp_progress {\n  0% {\n    background-position-y: 0;\n  }\n  100% {\n    background-position-y: 40px;\n  }\n}\n@-webkit-keyframes vicp {\n  0% {\n    opacity: 0;\n    -webkit-transform: scale(0) translatey(-60px);\n    transform: scale(0) translatey(-60px);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform: scale(1) translatey(0);\n    transform: scale(1) translatey(0);\n  }\n}\n@keyframes vicp {\n  0% {\n    opacity: 0;\n    -webkit-transform: scale(0) translatey(-60px);\n    transform: scale(0) translatey(-60px);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform: scale(1) translatey(0);\n    transform: scale(1) translatey(0);\n  }\n}\n.vue-image-crop-upload {\n  position: fixed;\n  display: block;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  z-index: 10000;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.65);\n  -webkit-tap-highlight-color: transparent;\n  -moz-tap-highlight-color: transparent;\n}\n.vue-image-crop-upload .vicp-wrap {\n  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\n  position: fixed;\n  display: block;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  z-index: 10000;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  width: 600px;\n  height: 330px;\n  padding: 25px;\n  background-color: #fff;\n  border-radius: 2px;\n  -webkit-animation: vicp 0.12s ease-in;\n  animation: vicp 0.12s ease-in;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-close {\n  position: absolute;\n  right: -30px;\n  top: -30px;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4 {\n  position: relative;\n  display: block;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  -webkit-transition: -webkit-transform 0.18s;\n  transition: -webkit-transform 0.18s;\n  transition: transform 0.18s;\n  transition: transform 0.18s, -webkit-transform 0.18s;\n  -webkit-transform: rotate(0);\n  -ms-transform: rotate(0);\n  transform: rotate(0);\n}\n.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4::after,\n.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4::before {\n  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\n  content: \"\";\n  position: absolute;\n  top: 12px;\n  left: 4px;\n  width: 20px;\n  height: 3px;\n  -webkit-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  transform: rotate(45deg);\n  background-color: #fff;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4::after {\n  -webkit-transform: rotate(-45deg);\n  -ms-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n}\n.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4:hover {\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area {\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  padding: 35px;\n  height: 170px;\n  background-color: rgba(0, 0, 0, 0.03);\n  text-align: center;\n  border: 1px dashed rgba(0, 0, 0, 0.08);\n  overflow: hidden;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1 {\n  display: block;\n  margin: 0 auto 6px;\n  width: 42px;\n  height: 42px;\n  overflow: hidden;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step1\n  .vicp-drop-area\n  .vicp-icon1\n  .vicp-icon1-arrow {\n  display: block;\n  margin: 0 auto;\n  width: 0;\n  height: 0;\n  border-bottom: 14.7px solid rgba(0, 0, 0, 0.3);\n  border-left: 14.7px solid transparent;\n  border-right: 14.7px solid transparent;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step1\n  .vicp-drop-area\n  .vicp-icon1\n  .vicp-icon1-body {\n  display: block;\n  width: 12.6px;\n  height: 14.7px;\n  margin: 0 auto;\n  background-color: rgba(0, 0, 0, 0.3);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step1\n  .vicp-drop-area\n  .vicp-icon1\n  .vicp-icon1-bottom {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: block;\n  height: 12.6px;\n  border: 6px solid rgba(0, 0, 0, 0.3);\n  border-top: none;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-hint {\n  display: block;\n  padding: 15px;\n  font-size: 14px;\n  color: #666;\n  line-height: 30px;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step1\n  .vicp-drop-area\n  .vicp-no-supported-hint {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 30px;\n  width: 100%;\n  height: 60px;\n  line-height: 30px;\n  background-color: #eee;\n  text-align: center;\n  color: #666;\n  font-size: 14px;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area:hover {\n  cursor: pointer;\n  border-color: rgba(0, 0, 0, 0.1);\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop {\n  overflow: hidden;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left {\n  float: left;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-img-container {\n  position: relative;\n  display: block;\n  width: 240px;\n  height: 180px;\n  background-color: #e5e5e0;\n  overflow: hidden;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-img-container\n  .vicp-img {\n  position: absolute;\n  display: block;\n  cursor: move;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-img-container\n  .vicp-img-shade {\n  -webkit-box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\n  position: absolute;\n  background-color: rgba(241, 242, 243, 0.8);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-img-container\n  .vicp-img-shade.vicp-img-shade-1 {\n  top: 0;\n  left: 0;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-img-container\n  .vicp-img-shade.vicp-img-shade-2 {\n  bottom: 0;\n  right: 0;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-rotate {\n  position: relative;\n  width: 240px;\n  height: 18px;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-rotate\n  i {\n  display: block;\n  width: 18px;\n  height: 18px;\n  border-radius: 100%;\n  line-height: 18px;\n  text-align: center;\n  font-size: 12px;\n  font-weight: bold;\n  background-color: rgba(0, 0, 0, 0.08);\n  color: #fff;\n  overflow: hidden;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-rotate\n  i:hover {\n  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.14);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-rotate\n  i:first-child {\n  float: left;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-rotate\n  i:last-child {\n  float: right;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range {\n  position: relative;\n  margin: 30px 0 10px 0;\n  width: 240px;\n  height: 18px;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon5,\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon6 {\n  position: absolute;\n  top: 0;\n  width: 18px;\n  height: 18px;\n  border-radius: 100%;\n  background-color: rgba(0, 0, 0, 0.08);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon5:hover,\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon6:hover {\n  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0.14);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon5 {\n  left: 0;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon5::before {\n  position: absolute;\n  content: \"\";\n  display: block;\n  left: 3px;\n  top: 8px;\n  width: 12px;\n  height: 2px;\n  background-color: #fff;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon6 {\n  right: 0;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon6::before {\n  position: absolute;\n  content: \"\";\n  display: block;\n  left: 3px;\n  top: 8px;\n  width: 12px;\n  height: 2px;\n  background-color: #fff;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  .vicp-icon6::after {\n  position: absolute;\n  content: \"\";\n  display: block;\n  top: 3px;\n  left: 8px;\n  width: 2px;\n  height: 12px;\n  background-color: #fff;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"] {\n  display: block;\n  padding-top: 5px;\n  margin: 0 auto;\n  width: 180px;\n  height: 8px;\n  vertical-align: top;\n  background: transparent;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  cursor: pointer;\n  /* 滑块\n               ---------------------------------------------------------------*/\n  /* 轨道\n               ---------------------------------------------------------------*/\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]:focus {\n  outline: none;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\n  -webkit-appearance: none;\n  appearance: none;\n  margin-top: -3px;\n  width: 12px;\n  height: 12px;\n  background-color: #61c091;\n  border-radius: 100%;\n  border: none;\n  -webkit-transition: 0.2s;\n  transition: 0.2s;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]::-moz-range-thumb {\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\n  -moz-appearance: none;\n  appearance: none;\n  width: 12px;\n  height: 12px;\n  background-color: #61c091;\n  border-radius: 100%;\n  border: none;\n  -webkit-transition: 0.2s;\n  transition: 0.2s;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]::-ms-thumb {\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.18);\n  appearance: none;\n  width: 12px;\n  height: 12px;\n  background-color: #61c091;\n  border: none;\n  border-radius: 100%;\n  -webkit-transition: 0.2s;\n  transition: 0.2s;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]:active::-moz-range-thumb {\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\n  width: 14px;\n  height: 14px;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]:active::-ms-thumb {\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\n  width: 14px;\n  height: 14px;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]:active::-webkit-slider-thumb {\n  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.23);\n  margin-top: -4px;\n  width: 14px;\n  height: 14px;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]::-webkit-slider-runnable-track {\n  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  width: 100%;\n  height: 6px;\n  cursor: pointer;\n  border-radius: 2px;\n  border: none;\n  background-color: rgba(68, 170, 119, 0.3);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]::-moz-range-track {\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  width: 100%;\n  height: 6px;\n  cursor: pointer;\n  border-radius: 2px;\n  border: none;\n  background-color: rgba(68, 170, 119, 0.3);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]::-ms-track {\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n  width: 100%;\n  cursor: pointer;\n  background: transparent;\n  border-color: transparent;\n  color: transparent;\n  height: 6px;\n  border-radius: 2px;\n  border: none;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]::-ms-fill-lower {\n  background-color: rgba(68, 170, 119, 0.3);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]::-ms-fill-upper {\n  background-color: rgba(68, 170, 119, 0.15);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]:focus::-webkit-slider-runnable-track {\n  background-color: rgba(68, 170, 119, 0.5);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]:focus::-moz-range-track {\n  background-color: rgba(68, 170, 119, 0.5);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]:focus::-ms-fill-lower {\n  background-color: rgba(68, 170, 119, 0.45);\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-left\n  .vicp-range\n  input[type=\"range\"]:focus::-ms-fill-upper {\n  background-color: rgba(68, 170, 119, 0.25);\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right {\n  float: right;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-right\n  .vicp-preview {\n  height: 150px;\n  overflow: hidden;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-right\n  .vicp-preview\n  .vicp-preview-item {\n  position: relative;\n  padding: 5px;\n  width: 100px;\n  height: 100px;\n  float: left;\n  margin-right: 16px;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-right\n  .vicp-preview\n  .vicp-preview-item\n  span {\n  position: absolute;\n  bottom: -30px;\n  width: 100%;\n  font-size: 14px;\n  color: #bbb;\n  display: block;\n  text-align: center;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-right\n  .vicp-preview\n  .vicp-preview-item\n  img {\n  position: absolute;\n  display: block;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  padding: 3px;\n  background-color: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  overflow: hidden;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-right\n  .vicp-preview\n  .vicp-preview-item.vicp-preview-item-circle {\n  margin-right: 0;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step2\n  .vicp-crop\n  .vicp-crop-right\n  .vicp-preview\n  .vicp-preview-item.vicp-preview-item-circle\n  img {\n  border-radius: 100%;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload {\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  padding: 35px;\n  height: 170px;\n  background-color: rgba(0, 0, 0, 0.03);\n  text-align: center;\n  border: 1px dashed #ddd;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-loading {\n  display: block;\n  padding: 15px;\n  font-size: 16px;\n  color: #999;\n  line-height: 30px;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-progress-wrap {\n  margin-top: 12px;\n  background-color: rgba(0, 0, 0, 0.08);\n  border-radius: 3px;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step3\n  .vicp-upload\n  .vicp-progress-wrap\n  .vicp-progress {\n  position: relative;\n  display: block;\n  height: 5px;\n  border-radius: 3px;\n  background-color: #4a7;\n  -webkit-box-shadow: 0 2px 6px 0 rgba(68, 170, 119, 0.3);\n  box-shadow: 0 2px 6px 0 rgba(68, 170, 119, 0.3);\n  -webkit-transition: width 0.15s linear;\n  transition: width 0.15s linear;\n  background-image: -webkit-linear-gradient(\n    135deg,\n    rgba(255, 255, 255, 0.2) 25%,\n    transparent 25%,\n    transparent 50%,\n    rgba(255, 255, 255, 0.2) 50%,\n    rgba(255, 255, 255, 0.2) 75%,\n    transparent 75%,\n    transparent\n  );\n  background-image: linear-gradient(\n    -45deg,\n    rgba(255, 255, 255, 0.2) 25%,\n    transparent 25%,\n    transparent 50%,\n    rgba(255, 255, 255, 0.2) 50%,\n    rgba(255, 255, 255, 0.2) 75%,\n    transparent 75%,\n    transparent\n  );\n  background-size: 40px 40px;\n  -webkit-animation: vicp_progress 0.5s linear infinite;\n  animation: vicp_progress 0.5s linear infinite;\n}\n.vue-image-crop-upload\n  .vicp-wrap\n  .vicp-step3\n  .vicp-upload\n  .vicp-progress-wrap\n  .vicp-progress::after {\n  content: \"\";\n  position: absolute;\n  display: block;\n  top: -3px;\n  right: -3px;\n  width: 9px;\n  height: 9px;\n  border: 1px solid rgba(245, 246, 247, 0.7);\n  -webkit-box-shadow: 0 1px 4px 0 rgba(68, 170, 119, 0.7);\n  box-shadow: 0 1px 4px 0 rgba(68, 170, 119, 0.7);\n  border-radius: 100%;\n  background-color: #4a7;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-error,\n.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-success {\n  height: 100px;\n  line-height: 100px;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-operate {\n  position: absolute;\n  right: 20px;\n  bottom: 20px;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-operate a {\n  position: relative;\n  float: left;\n  display: block;\n  margin-left: 10px;\n  width: 100px;\n  height: 36px;\n  line-height: 36px;\n  text-align: center;\n  cursor: pointer;\n  font-size: 14px;\n  color: #4a7;\n  border-radius: 2px;\n  overflow: hidden;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-operate a:hover {\n  background-color: rgba(0, 0, 0, 0.03);\n}\n.vue-image-crop-upload .vicp-wrap .vicp-error,\n.vue-image-crop-upload .vicp-wrap .vicp-success {\n  display: block;\n  font-size: 14px;\n  line-height: 24px;\n  height: 24px;\n  color: #d10;\n  text-align: center;\n  vertical-align: top;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-success {\n  color: #4a7;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-icon3 {\n  position: relative;\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  top: 4px;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-icon3::after {\n  position: absolute;\n  top: 3px;\n  left: 6px;\n  width: 6px;\n  height: 10px;\n  border-width: 0 2px 2px 0;\n  border-color: #4a7;\n  border-style: solid;\n  -webkit-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  transform: rotate(45deg);\n  content: \"\";\n}\n.vue-image-crop-upload .vicp-wrap .vicp-icon2 {\n  position: relative;\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  top: 4px;\n}\n.vue-image-crop-upload .vicp-wrap .vicp-icon2::after,\n.vue-image-crop-upload .vicp-wrap .vicp-icon2::before {\n  content: \"\";\n  position: absolute;\n  top: 9px;\n  left: 4px;\n  width: 13px;\n  height: 2px;\n  background-color: #d10;\n  -webkit-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n.vue-image-crop-upload .vicp-wrap .vicp-icon2::after {\n  -webkit-transform: rotate(-45deg);\n  -ms-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n}\n.e-ripple {\n  position: absolute;\n  border-radius: 100%;\n  background-color: rgba(0, 0, 0, 0.15);\n  background-clip: padding-box;\n  pointer-events: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-transform: scale(0);\n  -ms-transform: scale(0);\n  transform: scale(0);\n  opacity: 1;\n}\n.e-ripple.z-active {\n  opacity: 0;\n  -webkit-transform: scale(2);\n  -ms-transform: scale(2);\n  transform: scale(2);\n  -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n  transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n  transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n  transition: opacity 1.2s ease-out, transform 0.6s ease-out,\n    -webkit-transform 0.6s ease-out;\n}\n</style>\n"]}]}