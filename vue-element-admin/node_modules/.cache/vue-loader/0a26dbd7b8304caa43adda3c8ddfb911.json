{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/personalized/savePersonalized.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/personalized/savePersonalized.vue","mtime":1608726456333},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjbGVyayBmcm9tICJAL2FwaS9jbGVyayI7CmltcG9ydCBJbWFnZUNyb3BwZXIgZnJvbSAiQC9jb21wb25lbnRzL0ltYWdlQ3JvcHBlciI7CmltcG9ydCBQYW5UaHVtYiBmcm9tICJAL2NvbXBvbmVudHMvUGFuVGh1bWIiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBJbWFnZUNyb3BwZXIsIFBhblRodW1iIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJJbmZvOiB7fSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAogICAgICBpbWFnZWNyb3BwZXJTaG93OiBmYWxzZSwgLy/kuIrkvKDlvLnnqpfnu4Tku7bmmK/lkKbmmL7npLoKICAgICAgaW1hZ2Vjcm9wcGVyS2V5OiAwLCAvL+S4iuS8oOe7hOS7tueahGtleeWAvAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXRDbGVyaygpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdENsZXJrKCkgewogICAgICBjbGVyay5nZXRDbGVya0FuZFVzZXJSb2xlKCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnVzZXJJbmZvID0gcmVzcG9uc2UuZGF0YS51c2VyOwogICAgICB9KTsKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgLy/lhbPpl63kuIrkvKDlvLnmoYbnmoTmlrnms5UKICAgICAgdGhpcy5pbWFnZWNyb3BwZXJTaG93ID0gZmFsc2U7CiAgICAgIC8v5LiK5Lyg57uE5Lu25Yid5aeL5YyWCiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOwogICAgfSwKICAgIC8v5LiK5Lyg5oiQ5Yqf5pa55rOVCiAgICBjcm9wU3VjY2VzcyhkYXRhKSB7CiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyU2hvdyA9IGZhbHNlOwogICAgICAvL+S4iuS8oOS5i+WQjuaOpeWPo+i/lOWbnuWbvueJh+WcsOWdgAogICAgICB0aGlzLnVzZXJJbmZvLmF2YXRhciA9IGRhdGEudXJsOwogICAgICB0aGlzLmltYWdlY3JvcHBlcktleSA9IHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ICsgMTsKICAgIH0sCiAgICAvL+S/ruaUuQogICAgdXBkYXRlVXNlclAoKSB7CiAgICAgIGNsZXJrCiAgICAgICAgLnVwZGF0ZVVzZXIodGhpcy51c2VySW5mbykKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnmiJDlip8hIiwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAiL3Byb2ZpbGUvaW5kZXgiIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["savePersonalized.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"savePersonalized.vue","sourceRoot":"src/views/personalized","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"120px\">\n      <el-form-item label=\"账号\">\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"userInfo.username\" />\n      </el-form-item>\n      <el-form-item label=\"昵称\">\n        <el-input maxlength=\"10\" show-word-limit v-model=\"userInfo.name\" />\n      </el-form-item>\n      <el-form-item label=\"个人签名\">\n        <el-input v-model=\"userInfo.introduction\" />\n      </el-form-item>\n      <el-form-item label=\"头像\">\n        <pan-thumb :image=\"userInfo.avatar + ''\" />\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-upload\"\n          @click=\"imagecropperShow = true\"\n          >更换照片</el-button\n        >\n        <image-cropper\n          v-show=\"imagecropperShow\"\n          :width=\"300\"\n          :height=\"300\"\n          :key=\"imagecropperKey\"\n          url=\"http://localhost:8001/oss/fileoss/uploadOssFile\"\n          field=\"file\"\n          @close=\"close\"\n          @crop-upload-success=\"cropSuccess\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"updateUserP()\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport clerk from \"@/api/clerk\";\nimport ImageCropper from \"@/components/ImageCropper\";\nimport PanThumb from \"@/components/PanThumb\";\nexport default {\n  components: { ImageCropper, PanThumb },\n  data() {\n    return {\n      userInfo: {},\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      imagecropperShow: false, //上传弹窗组件是否显示\n      imagecropperKey: 0, //上传组件的key值\n    };\n  },\n  created() {\n    this.initClerk();\n  },\n  methods: {\n    initClerk() {\n      clerk.getClerkAndUserRole().then((response) => {\n        this.userInfo = response.data.user;\n      });\n    },\n    close() {\n      //关闭上传弹框的方法\n      this.imagecropperShow = false;\n      //上传组件初始化\n      this.imagecropperKey = this.imagecropperKey + 1;\n    },\n    //上传成功方法\n    cropSuccess(data) {\n      this.imagecropperShow = false;\n      //上传之后接口返回图片地址\n      this.userInfo.avatar = data.url;\n      this.imagecropperKey = this.imagecropperKey + 1;\n    },\n    //修改\n    updateUserP() {\n      clerk\n        .updateUser(this.userInfo)\n        .then((response) => {\n          this.$message({\n            type: \"success\",\n            message: \"修改成功!\",\n          });\n          this.$router.push({ path: \"/profile/index\" });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n\n"]}]}