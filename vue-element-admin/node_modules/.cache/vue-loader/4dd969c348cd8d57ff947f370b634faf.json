{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/permissions/saveClerk.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/permissions/saveClerk.vue","mtime":1608726456333},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjbGVyayBmcm9tICJAL2FwaS9jbGVyayI7CmltcG9ydCByb2xlIGZyb20gIkAvYXBpL3JvbGUiOwppbXBvcnQgZGVwYXJ0bWVudCBmcm9tICJAL2FwaS9kZXBhcnRtZW50IjsKaW1wb3J0IEltYWdlQ3JvcHBlciBmcm9tICJAL2NvbXBvbmVudHMvSW1hZ2VDcm9wcGVyIjsKaW1wb3J0IFBhblRodW1iIGZyb20gIkAvY29tcG9uZW50cy9QYW5UaHVtYiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBJbWFnZUNyb3BwZXIsIFBhblRodW1iIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1hbmFnZW1lbnRJbmZvOiAiIiwKICAgICAgY2xlcms6IHt9LAogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlLCAvLyDkv53lrZjmjInpkq7mmK/lkKbnpoHnlKgsCiAgICAgIGRlcGFydG1lbnRMaXN0OiBudWxsLAogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlLCAvLyDkv53lrZjmjInpkq7mmK/lkKbnpoHnlKgsCiAgICAgIGltYWdlY3JvcHBlclNob3c6IGZhbHNlLCAvL+S4iuS8oOW8ueeql+e7hOS7tuaYr+WQpuaYvuekugogICAgICBpbWFnZWNyb3BwZXJLZXk6IDAsIC8v5LiK5Lyg57uE5Lu255qEa2V55YC8CiAgICAgIGNsZXJrSWQ6ICIiLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICAgIHRoaXMuaW5pdERlcGFydG1lbnQoKTsKICB9LAogIHdhdGNoOiB7CiAgICAvL+ebkeWQrAogICAgJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIC8v6Lev55Sx5Y+R55Sf5Y+Y5YyWIOaWueazleWwseS8muaJp+ihjAogICAgICB0aGlzLmluaXQoKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WIneWni+WMlgogICAgaW5pdCgpIHsKICAgICAgLy/liKTmlq3ot6/lvoTkuK3mmK/lkKbmnIlpZOWAvAogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIGNvbnN0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIHRoaXMuY2xlcmtJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICB0aGlzLmdldENsZXJrQnlJZChpZCk7CiAgICAgICAgdGhpcy5pbml0Um9sZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5riF56m66KGo5Y2VCiAgICAgICAgdGhpcy5jbGVyayA9IHt9OwogICAgICB9CiAgICB9LAogICAgaW5pdFJvbGUoKSB7CiAgICAgIHJvbGUuZ2V0Um9sZUJ5Q2xlcmtJZCh0aGlzLmNsZXJrSWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucm9sZSkgewogICAgICAgICAgdGhpcy5tYW5hZ2VtZW50SW5mbyA9ICLmmK8iOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1hbmFnZW1lbnRJbmZvID0gIuWQpiI7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+afpeivoumDqOmXqAogICAgaW5pdERlcGFydG1lbnQoKSB7CiAgICAgIGRlcGFydG1lbnQuZ2V0RGVwYXJ0bWVudExpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuZGVwYXJ0bWVudExpc3QgPSByZXNwb25zZS5kYXRhLmRlcGFydG1lbnRMaXN0OwogICAgICB9KTsKICAgIH0sCgogICAgLy/moLnmja5pZOafpeivogogICAgZ2V0Q2xlcmtCeUlkKGlkKSB7CiAgICAgIGNsZXJrCiAgICAgICAgLmdldENsZXJrQnlJZChpZCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuY2xlcmsgPSByZXNwb25zZS5kYXRhLmNsZXJrOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge30pOwogICAgfSwKICAgIC8v5re75YqgCiAgICBzYXZlKCkgewogICAgICByb2xlCiAgICAgICAgLnVvZGF0ZVJvbGVCeUNsZXJrSWQodGhpcy5jbGVya0lkLCB0aGlzLm1hbmFnZW1lbnRJbmZvKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyEiLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvcGVybWlzc2lvbnMvbGlzdFBlcm1pc3Npb25zIiB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["saveClerk.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"saveClerk.vue","sourceRoot":"src/views/permissions","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"140px\">\n      <el-form-item label=\"员工编号\">\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"clerk.id\" />\n      </el-form-item>\n      <el-form-item label=\"员工名称\">\n        <el-input\n          :disabled=\"true\"\n          maxlength=\"10\"\n          show-word-limit\n          v-model=\"clerk.name\"\n        />\n      </el-form-item>\n      <el-form-item label=\"备注\">\n        <el-radio :disabled=\"true\" v-model=\"clerk.sex\" label=\"0\">女</el-radio>\n        <el-radio :disabled=\"true\" v-model=\"clerk.sex\" label=\"1\">男</el-radio>\n      </el-form-item>\n      <el-form-item label=\"手机号\">\n        <el-input :disabled=\"true\" v-model=\"clerk.phoneNumber\" />\n      </el-form-item>\n      <el-form-item label=\"身份证号\">\n        <el-input :disabled=\"true\" v-model=\"clerk.idCard\" />\n      </el-form-item>\n      <el-form-item label=\"地址\">\n        <el-input :disabled=\"true\" v-model=\"clerk.address\" />\n      </el-form-item>\n      <el-form-item label=\"职务\">\n        <el-input :disabled=\"true\" v-model=\"clerk.position\" />\n      </el-form-item>\n      <el-form-item label=\"部门\">\n        <el-select\n          :disabled=\"true\"\n          v-model=\"clerk.departmentId\"\n          clearable\n          placeholder=\"请选择\"\n        >\n          <el-option\n            v-for=\"item in departmentList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"员工照片\">\n        <!-- 头衔缩略图 -->\n        <pan-thumb :image=\"clerk.photo + ''\" />\n        <!-- 文件上传按钮 -->\n      </el-form-item>\n      <el-form-item label=\"是否激活管理员权限\">\n        <el-radio-group v-model=\"managementInfo\">\n          <el-radio-button label=\"是\"></el-radio-button>\n          <el-radio-button label=\"否\"></el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"save\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport clerk from \"@/api/clerk\";\nimport role from \"@/api/role\";\nimport department from \"@/api/department\";\nimport ImageCropper from \"@/components/ImageCropper\";\nimport PanThumb from \"@/components/PanThumb\";\n\nexport default {\n  components: { ImageCropper, PanThumb },\n  data() {\n    return {\n      managementInfo: \"\",\n      clerk: {},\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      departmentList: null,\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      imagecropperShow: false, //上传弹窗组件是否显示\n      imagecropperKey: 0, //上传组件的key值\n      clerkId: \"\",\n    };\n  },\n  created() {\n    this.init();\n    this.initDepartment();\n  },\n  watch: {\n    //监听\n    $route(to, from) {\n      //路由发生变化 方法就会执行\n      this.init();\n    },\n  },\n  methods: {\n    //初始化\n    init() {\n      //判断路径中是否有id值\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id;\n        this.clerkId = this.$route.params.id;\n        this.getClerkById(id);\n        this.initRole();\n      } else {\n        //清空表单\n        this.clerk = {};\n      }\n    },\n    initRole() {\n      role.getRoleByClerkId(this.clerkId).then((response) => {\n        if (response.data.role) {\n          this.managementInfo = \"是\";\n        } else {\n          this.managementInfo = \"否\";\n        }\n      });\n    },\n    //查询部门\n    initDepartment() {\n      department.getDepartmentList().then((response) => {\n        this.departmentList = response.data.departmentList;\n      });\n    },\n\n    //根据id查询\n    getClerkById(id) {\n      clerk\n        .getClerkById(id)\n        .then((response) => {\n          this.clerk = response.data.clerk;\n        })\n        .catch((error) => {});\n    },\n    //添加\n    save() {\n      role\n        .uodateRoleByClerkId(this.clerkId, this.managementInfo)\n        .then((response) => {\n          this.$message({\n            type: \"success\",\n            message: \"修改成功!\",\n          });\n          this.$router.push({ path: \"/permissions/listPermissions\" });\n        });\n    },\n  },\n};\n</script>\n\n"]}]}