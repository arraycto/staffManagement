{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js!/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/personalized/savePersonalized.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/personalized/savePersonalized.vue","mtime":1608726456333},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGNsZXJrIGZyb20gIkAvYXBpL2NsZXJrIjsKaW1wb3J0IEltYWdlQ3JvcHBlciBmcm9tICJAL2NvbXBvbmVudHMvSW1hZ2VDcm9wcGVyIjsKaW1wb3J0IFBhblRodW1iIGZyb20gIkAvY29tcG9uZW50cy9QYW5UaHVtYiI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBJbWFnZUNyb3BwZXI6IEltYWdlQ3JvcHBlciwKICAgIFBhblRodW1iOiBQYW5UaHVtYgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJJbmZvOiB7fSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAogICAgICBpbWFnZWNyb3BwZXJTaG93OiBmYWxzZSwKICAgICAgLy/kuIrkvKDlvLnnqpfnu4Tku7bmmK/lkKbmmL7npLoKICAgICAgaW1hZ2Vjcm9wcGVyS2V5OiAwIC8v5LiK5Lyg57uE5Lu255qEa2V55YC8CgogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXRDbGVyaygpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdENsZXJrOiBmdW5jdGlvbiBpbml0Q2xlcmsoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjbGVyay5nZXRDbGVya0FuZFVzZXJSb2xlKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy51c2VySW5mbyA9IHJlc3BvbnNlLmRhdGEudXNlcjsKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICAvL+WFs+mXreS4iuS8oOW8ueahhueahOaWueazlQogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsgLy/kuIrkvKDnu4Tku7bliJ3lp4vljJYKCiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOwogICAgfSwKICAgIC8v5LiK5Lyg5oiQ5Yqf5pa55rOVCiAgICBjcm9wU3VjY2VzczogZnVuY3Rpb24gY3JvcFN1Y2Nlc3MoZGF0YSkgewogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsgLy/kuIrkvKDkuYvlkI7mjqXlj6Pov5Tlm57lm77niYflnLDlnYAKCiAgICAgIHRoaXMudXNlckluZm8uYXZhdGFyID0gZGF0YS51cmw7CiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOwogICAgfSwKICAgIC8v5L+u5pS5CiAgICB1cGRhdGVVc2VyUDogZnVuY3Rpb24gdXBkYXRlVXNlclAoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY2xlcmsudXBkYXRlVXNlcih0aGlzLnVzZXJJbmZvKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfISIKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAiL3Byb2ZpbGUvaW5kZXgiCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["savePersonalized.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,OAAA,KAAA,MAAA,aAAA;AACA,OAAA,YAAA,MAAA,2BAAA;AACA,OAAA,QAAA,MAAA,uBAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,YAAA,EAAA,YAAA;AAAA,IAAA,QAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,eAAA,EAAA,KAFA;AAEA;AACA,MAAA,gBAAA,EAAA,KAHA;AAGA;AACA,MAAA,eAAA,EAAA,CAJA,CAIA;;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,SAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,MAAA,KAAA,CAAA,mBAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAFA;AAGA,KALA;AAMA,IAAA,KANA,mBAMA;AACA;AACA,WAAA,gBAAA,GAAA,KAAA,CAFA,CAGA;;AACA,WAAA,eAAA,GAAA,KAAA,eAAA,GAAA,CAAA;AACA,KAXA;AAYA;AACA,IAAA,WAbA,uBAaA,IAbA,EAaA;AACA,WAAA,gBAAA,GAAA,KAAA,CADA,CAEA;;AACA,WAAA,QAAA,CAAA,MAAA,GAAA,IAAA,CAAA,GAAA;AACA,WAAA,eAAA,GAAA,KAAA,eAAA,GAAA,CAAA;AACA,KAlBA;AAmBA;AACA,IAAA,WApBA,yBAoBA;AAAA;;AACA,MAAA,KAAA,CACA,UADA,CACA,KAAA,QADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,IAAA,EAAA,SADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;;AAIA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA,OARA,EASA,KATA,CASA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OAXA;AAYA;AAjCA;AAbA,CAAA","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"120px\">\n      <el-form-item label=\"账号\">\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"userInfo.username\" />\n      </el-form-item>\n      <el-form-item label=\"昵称\">\n        <el-input maxlength=\"10\" show-word-limit v-model=\"userInfo.name\" />\n      </el-form-item>\n      <el-form-item label=\"个人签名\">\n        <el-input v-model=\"userInfo.introduction\" />\n      </el-form-item>\n      <el-form-item label=\"头像\">\n        <pan-thumb :image=\"userInfo.avatar + ''\" />\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-upload\"\n          @click=\"imagecropperShow = true\"\n          >更换照片</el-button\n        >\n        <image-cropper\n          v-show=\"imagecropperShow\"\n          :width=\"300\"\n          :height=\"300\"\n          :key=\"imagecropperKey\"\n          url=\"http://localhost:8001/oss/fileoss/uploadOssFile\"\n          field=\"file\"\n          @close=\"close\"\n          @crop-upload-success=\"cropSuccess\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"updateUserP()\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport clerk from \"@/api/clerk\";\nimport ImageCropper from \"@/components/ImageCropper\";\nimport PanThumb from \"@/components/PanThumb\";\nexport default {\n  components: { ImageCropper, PanThumb },\n  data() {\n    return {\n      userInfo: {},\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      imagecropperShow: false, //上传弹窗组件是否显示\n      imagecropperKey: 0, //上传组件的key值\n    };\n  },\n  created() {\n    this.initClerk();\n  },\n  methods: {\n    initClerk() {\n      clerk.getClerkAndUserRole().then((response) => {\n        this.userInfo = response.data.user;\n      });\n    },\n    close() {\n      //关闭上传弹框的方法\n      this.imagecropperShow = false;\n      //上传组件初始化\n      this.imagecropperKey = this.imagecropperKey + 1;\n    },\n    //上传成功方法\n    cropSuccess(data) {\n      this.imagecropperShow = false;\n      //上传之后接口返回图片地址\n      this.userInfo.avatar = data.url;\n      this.imagecropperKey = this.imagecropperKey + 1;\n    },\n    //修改\n    updateUserP() {\n      clerk\n        .updateUser(this.userInfo)\n        .then((response) => {\n          this.$message({\n            type: \"success\",\n            message: \"修改成功!\",\n          });\n          this.$router.push({ path: \"/profile/index\" });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n\n"],"sourceRoot":"src/views/personalized"}]}