{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js!/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/contract/saveContract.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/contract/saveContract.vue","mtime":1608726456325},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMveGl4aS9zdGFmZl9tYW5hZ2VtZW50L3Z1ZS1lbGVtZW50LWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBjb250cmFjdCBmcm9tICJAL2FwaS9jb250cmFjdCI7CmltcG9ydCBJbWFnZUNyb3BwZXIgZnJvbSAiQC9jb21wb25lbnRzL0ltYWdlQ3JvcHBlciI7CmltcG9ydCBQYW5UaHVtYiBmcm9tICJAL2NvbXBvbmVudHMvUGFuVGh1bWIiOwppbXBvcnQgY2xlcmsgZnJvbSAiQC9hcGkvY2xlcmsiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgSW1hZ2VDcm9wcGVyOiBJbWFnZUNyb3BwZXIsCiAgICBQYW5UaHVtYjogUGFuVGh1bWIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3JlZjsKCiAgICByZXR1cm4gX3JlZiA9IHsKICAgICAgY29udHJhY3Q6IHt9LAogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlCiAgICB9LCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInNhdmVCdG5EaXNhYmxlZCIsIGZhbHNlKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICJpbWFnZWNyb3BwZXJTaG93IiwgZmFsc2UpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgImltYWdlY3JvcHBlcktleSIsIDApLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgImNsZXJrTGlzdCIsIG51bGwpLCBfcmVmOwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5pbml0Q2xlcmsoKTsKICB9LAogIHdhdGNoOiB7CiAgICAvL+ebkeWQrAogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUodG8sIGZyb20pIHsKICAgICAgLy/ot6/nlLHlj5HnlJ/lj5jljJYg5pa55rOV5bCx5Lya5omn6KGMCiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICAvL+WFs+mXreS4iuS8oOW8ueahhueahOaWueazlQogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsgLy/kuIrkvKDnu4Tku7bliJ3lp4vljJYKCiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOwogICAgfSwKICAgIC8v5LiK5Lyg5oiQ5Yqf5pa55rOVCiAgICBjcm9wU3VjY2VzczogZnVuY3Rpb24gY3JvcFN1Y2Nlc3MoZGF0YSkgewogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsgLy/kuIrkvKDkuYvlkI7mjqXlj6Pov5Tlm57lm77niYflnLDlnYAKCiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB0aGlzLmNvbnRyYWN0LnVybCA9IGRhdGEudXJsOwogICAgICB0aGlzLmltYWdlY3JvcHBlcktleSA9IHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ICsgMTsKICAgIH0sCiAgICAvL+WIneWni+WMlgogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgLy/liKTmlq3ot6/lvoTkuK3mmK/lkKbmnIlpZOWAvAogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICB0aGlzLmdldENvbnRyYWN0QnlJZChpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/muIXnqbrooajljZUKICAgICAgICB0aGlzLmNvbnRyYWN0ID0ge307CiAgICAgIH0KICAgIH0sCiAgICAvL+afpeivogogICAgaW5pdENsZXJrOiBmdW5jdGlvbiBpbml0Q2xlcmsoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjbGVyay5nZXRDbGVya0xpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmNsZXJrTGlzdCA9IHJlc3BvbnNlLmRhdGEuY2xlcmtMaXN0OwogICAgICB9KTsKICAgIH0sCiAgICAvL+S/ruaUuQogICAgdXBkYXRlQ29udHJhY3Q6IGZ1bmN0aW9uIHVwZGF0ZUNvbnRyYWN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnRyYWN0LnVwZGF0ZUNvbnRyYWN0KHRoaXMuY29udHJhY3QpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnmiJDlip8hIgogICAgICAgIH0pOwoKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICIvY29udHJhY3QvbGlzdENvbnRyYWN0IgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrmlk5p+l6K+iCiAgICBnZXRDb250cmFjdEJ5SWQ6IGZ1bmN0aW9uIGdldENvbnRyYWN0QnlJZChpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGNvbnRyYWN0LmdldENvbnRyYWN0QnlJZChpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczMuY29udHJhY3QgPSByZXNwb25zZS5kYXRhLmNvbnRyYWN0OwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHt9KTsKICAgIH0sCiAgICBzYXZlT3JVcGRhdGU6IGZ1bmN0aW9uIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgLy/liKTmlq3mmK/kv67mlLnov5jmmK/mt7vliqAKICAgICAgLy/liKTmlq3ot6/lvoTkuK3mmK/lkKbmnIlpZAogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIC8v5L+u5pS5CiAgICAgICAgdGhpcy51cGRhdGVDb250cmFjdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5re75YqgCiAgICAgICAgdGhpcy5zYXZlQ29udHJhY3QoKTsKICAgICAgfQogICAgfSwKICAgIC8v5re75YqgCiAgICBzYXZlQ29udHJhY3Q6IGZ1bmN0aW9uIHNhdmVDb250cmFjdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBjb250cmFjdC5hZGRDb250cmFjdCh0aGlzLmNvbnRyYWN0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8v5re75Yqg5oiQ5YqfCiAgICAgICAgLy/mj5DnpLrkv6Hmga8KICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIua3u+WKoOaIkOWKnyIKICAgICAgICB9KTsgLy/lm57liLDliJfooagg6Lev55Sx6Lez6L2sKOmHjeWumuWQkSkKCgogICAgICAgIF90aGlzNC4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi9jb250cmFjdC9saXN0Q29udHJhY3QiCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgey8v5o+Q56S65L+h5oGvCiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgLy8gICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgLy8gICBtZXNzYWdlOiAi5re75Yqg5aSx6LSlIiwKICAgICAgICAvLyB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["saveContract.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"120px\">\n      <el-form-item label=\"合同编号\">\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"contract.id\" />\n      </el-form-item>\n      <el-form-item label=\"合同名称\">\n        <el-input v-model=\"contract.name\" />\n      </el-form-item>\n      <el-form-item label=\"签约日期\">\n        <el-date-picker\n          v-model=\"contract.time\"\n          type=\"datetime\"\n          placeholder=\"请选择时间\"\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\n        >\n        </el-date-picker>\n      </el-form-item>\n       <el-form-item label=\"到期时间日期\">\n        <el-date-picker\n          v-model=\"contract.timeout\"\n          type=\"datetime\"\n          placeholder=\"请选择时间\"\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\n        >\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"选择员工\">\n       <el-select v-model=\"contract.clerkId\" clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in clerkList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n\n      <el-form-item label=\"合同照片\">\n        <!-- 头衔缩略图 -->\n        <pan-thumb :image=\"contract.url+''\" />\n        <!-- 文件上传按钮 -->\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-upload\"\n          @click=\"imagecropperShow = true\"\n          >更换图片</el-button\n        >\n        <!--v-show：是否显示上传组件\n        :key：类似于id，如果一个页面多个图片上传控件，可以做区分\n        :url：后台上传的url地址\n        @close：关闭上传组件\n        @crop-upload-success：上传成功后的回调-->\n        <image-cropper\n          v-show=\"imagecropperShow\"\n          :width=\"300\"\n          :height=\"300\"\n          :key=\"imagecropperKey\"\n          url=\"http://localhost:8001/oss/fileoss/uploadOssFile\"\n          field=\"file\"\n          @close=\"close\"\n          @crop-upload-success=\"cropSuccess\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport contract from \"@/api/contract\";\nimport ImageCropper from \"@/components/ImageCropper\";\nimport PanThumb from \"@/components/PanThumb\";\nimport clerk from \"@/api/clerk\"\nexport default {\n  components: { ImageCropper, PanThumb },\n  data() {\n    return {\n      contract: {},\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      imagecropperShow: false, //上传弹窗组件是否显示\n      imagecropperKey: 0, //上传组件的key值   \n      clerkList:null  \n    };\n  },\n  created() {\n    this.init();\n    this.initClerk();\n  },\n  watch: {\n    //监听\n    $route(to, from) {\n      //路由发生变化 方法就会执行\n      this.init();\n    },\n  },\n  methods: {\n    close() {\n      //关闭上传弹框的方法\n      this.imagecropperShow = false;\n      //上传组件初始化\n      this.imagecropperKey = this.imagecropperKey + 1;\n    },\n    //上传成功方法\n    cropSuccess(data) {\n      this.imagecropperShow = false;\n      //上传之后接口返回图片地址\n      console.log(data);\n      this.contract.url = data.url;\n      this.imagecropperKey = this.imagecropperKey + 1;\n    },\n    //初始化\n    init() {\n      //判断路径中是否有id值\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id;\n        this.getContractById(id);\n      } else {\n        //清空表单\n        this.contract = {};\n      }\n    },\n    //查询\n    initClerk() {\n      clerk.getClerkList().then((response) => {\n        this.clerkList = response.data.clerkList;\n      });\n    },\n    //修改\n    updateContract() {\n      contract.updateContract(this.contract).then((response) => {\n        this.$message({\n          type: \"success\",\n          message: \"修改成功!\",\n        });\n        this.$router.push({ path: \"/contract/listContract\" });\n      });\n    },\n    //根据id查询\n    getContractById(id) {\n      contract\n        .getContractById(id)\n        .then((response) => {\n          this.contract = response.data.contract;\n        })\n        .catch((error) => {});\n    },\n    saveOrUpdate() {\n      //判断是修改还是添加\n      //判断路径中是否有id\n      if (this.$route.params && this.$route.params.id) {\n        //修改\n        this.updateContract();\n      } else {\n        //添加\n        this.saveContract();\n      }\n    },\n    //添加\n    saveContract() {\n\n        contract\n          .addContract(this.contract)\n          .then((response) => {\n            //添加成功\n            //提示信息\n            this.$message({\n              type: \"success\",\n              message: \"添加成功\",\n            });\n            //回到列表 路由跳转(重定向)\n            this.$router.push({ path: \"/contract/listContract\" });\n          })\n          .catch((error) => {\n            //提示信息\n            // this.$message({\n            //   type: \"warning\",\n            //   message: \"添加失败\",\n            // });\n          });\n      \n    },\n  },\n};\n</script>\n\n"],"sourceRoot":"src/views/contract"}]}