{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js!/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/announcement/saveAnnouncement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/announcement/saveAnnouncement.vue","mtime":1608726456322},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFRpbnltY2VFZGl0b3IgZnJvbSAiQC9jb21wb25lbnRzL3RpbnltY2UiOwppbXBvcnQgYW5ub3VuY2VtZW50IGZyb20gIkAvYXBpL2Fubm91bmNlbWVudCI7CmltcG9ydCBvc3MgZnJvbSAiQC9hcGkvb3NzIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIC8v5rOo5YaMVGlueW1jZUVkaXRvcue7hOS7tgogICAgVGlueW1jZUVkaXRvcjogVGlueW1jZUVkaXRvcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFubm91bmNlbWVudDoge30sCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLAoKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcmVhbEhlaWdodDogZnVuY3Rpb24gcmVhbEhlaWdodCgpIHsKICAgICAgcmV0dXJuICh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkgLSAyMDA7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICB3YXRjaDogewogICAgLy/nm5HlkKwKICAgICRyb3V0ZTogZnVuY3Rpb24gJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIC8v6Lev55Sx5Y+R55Sf5Y+Y5YyWIOaWueazleWwseS8muaJp+ihjAogICAgICB0aGlzLmluaXQoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5Yid5aeL5YyWCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICAvL+WIpOaWrei3r+W+hOS4reaYr+WQpuaciWlk5YC8CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIHRoaXMuZ2V0QW5ub3VuY2VtZW50QnlJZChpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/muIXnqbrooajljZUKICAgICAgICB0aGlzLmFubm91bmNlbWVudCA9IHt9OwogICAgICB9CiAgICB9LAogICAgLy/kv67mlLkKICAgIHVwZGF0ZUFubm91bmNlbWVudDogZnVuY3Rpb24gdXBkYXRlQW5ub3VuY2VtZW50KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYW5ub3VuY2VtZW50LnVwZGF0ZUFubm91bmNlbWVudCh0aGlzLmFubm91bmNlbWVudCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfISIKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICIvYW5ub3VuY2VtZW50L2xpc3RBbm5vdW5jZW1lbnQiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5qC55o2uaWTmn6Xor6IKICAgIGdldEFubm91bmNlbWVudEJ5SWQ6IGZ1bmN0aW9uIGdldEFubm91bmNlbWVudEJ5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBhbm5vdW5jZW1lbnQuZ2V0QW5ub3VuY2VtZW50QnlJZChpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuYW5ub3VuY2VtZW50ID0gcmVzcG9uc2UuZGF0YS5hbm5vdW5jZW1lbnQ7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge30pOwogICAgfSwKICAgIHNhdmVPclVwZGF0ZTogZnVuY3Rpb24gc2F2ZU9yVXBkYXRlKCkgewogICAgICAvL+WIpOaWreaYr+S/ruaUuei/mOaYr+a3u+WKoAogICAgICAvL+WIpOaWrei3r+W+hOS4reaYr+WQpuaciWlkCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgLy/kv67mlLkKICAgICAgICB0aGlzLnVwZGF0ZUFubm91bmNlbWVudCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5re75YqgCiAgICAgICAgdGhpcy5zYXZlQW5ub3VuY2VtZW50KCk7CiAgICAgIH0KICAgIH0sCiAgICAvL+a3u+WKoAogICAgc2F2ZUFubm91bmNlbWVudDogZnVuY3Rpb24gc2F2ZUFubm91bmNlbWVudCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5hbm5vdW5jZW1lbnQudGl0bGUgPT0gbnVsbCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgbWVzc2FnZTogIuivt+a3u+WKoOagh+mimCIKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbm5vdW5jZW1lbnQuYWRkQW5ub3VuY2VtZW50KHRoaXMuYW5ub3VuY2VtZW50KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgLy/mt7vliqDmiJDlip8KICAgICAgICAgIC8v5o+Q56S65L+h5oGvCiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDmiJDlip8iCiAgICAgICAgICB9KTsgLy/lm57liLDliJfooagg6Lev55Sx6Lez6L2sKOmHjeWumuWQkSkKCgogICAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICIvYW5ub3VuY2VtZW50L2xpc3RBbm5vdW5jZW1lbnQiCiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsvL+aPkOekuuS/oeaBrwogICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAvLyAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIC8vICAgbWVzc2FnZTogIua3u+WKoOWksei0pSIsCiAgICAgICAgICAvLyB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["saveAnnouncement.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"120px\">\n      <el-form-item label=\"公告标题\">\n        <el-input :span=\"6\" v-model=\"announcement.title\" />\n      </el-form-item>\n      <el-form-item label=\"发布时间\">\n        <el-date-picker\n          v-model=\"announcement.time\"\n          type=\"datetime\"\n          placeholder=\"选择日期时间\"\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\n        >\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"公告具体内容\">\n        <tinymce-editor\n          id=\"editor\"\n          ref=\"editor\"\n          v-model=\"announcement.content\"\n          :height=\"realHeight\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport TinymceEditor from \"@/components/tinymce\";\n\nimport announcement from \"@/api/announcement\";\nimport oss from \"@/api/oss\";\nexport default {\n  components: {\n    //注册TinymceEditor组件\n    TinymceEditor,\n  },\n  data() {\n    return {\n      announcement: {},\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n    };\n  },\n  computed: {\n    realHeight() {\n      return (\n        (window.innerHeight ||\n          document.documentElement.clientHeight ||\n          document.body.clientHeight) - 200\n      );\n    },\n  },\n  created() {\n    this.init();\n  },\n  watch: {\n    //监听\n    $route(to, from) {\n      //路由发生变化 方法就会执行\n      this.init();\n    },\n  },\n\n  methods: {\n\n    //初始化\n    init() {\n      //判断路径中是否有id值\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id;\n        this.getAnnouncementById(id);\n      } else {\n        //清空表单\n        this.announcement = {};\n      }\n    },\n    //修改\n    updateAnnouncement() {\n      announcement.updateAnnouncement(this.announcement).then((response) => {\n        this.$message({\n          type: \"success\",\n          message: \"修改成功!\",\n        });\n        this.$router.push({ path: \"/announcement/listAnnouncement\" });\n      });\n    },\n    //根据id查询\n    getAnnouncementById(id) {\n      announcement\n        .getAnnouncementById(id)\n        .then((response) => {\n          this.announcement = response.data.announcement;\n        })\n        .catch((error) => {});\n    },\n    saveOrUpdate() {\n      //判断是修改还是添加\n      //判断路径中是否有id\n      if (this.$route.params && this.$route.params.id) {\n        //修改\n        this.updateAnnouncement();\n      } else {\n        //添加\n        this.saveAnnouncement();\n      }\n    },\n    //添加\n    saveAnnouncement() {\n      if (this.announcement.title == null) {\n        this.$message({\n          type: \"warning\",\n          message: \"请添加标题\",\n        });\n      } else {\n        announcement\n          .addAnnouncement(this.announcement)\n          .then((response) => {\n            //添加成功\n            //提示信息\n            this.$message({\n              type: \"success\",\n              message: \"添加成功\",\n            });\n            //回到列表 路由跳转(重定向)\n            this.$router.push({ path: \"/announcement/listAnnouncement\" });\n          })\n          .catch((error) => {\n            //提示信息\n            // this.$message({\n            //   type: \"warning\",\n            //   message: \"添加失败\",\n            // });\n          });\n      }\n    },\n  },\n};\n</script>\n\n"],"sourceRoot":"src/views/announcement"}]}