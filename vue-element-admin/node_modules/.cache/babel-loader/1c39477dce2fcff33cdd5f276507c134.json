{"remainingRequest":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js!/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xixi/staff_management/vue-element-admin/src/views/attendance/saveAttendance.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xixi/staff_management/vue-element-admin/src/views/attendance/saveAttendance.vue","mtime":1608726456323},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":1608726441374},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":1608726442352},{"path":"/Users/xixi/staff_management/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":1608726455182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF0dGVuZGFuY2UgZnJvbSAiQC9hcGkvYXR0ZW5kYW5jZSI7CmltcG9ydCBkZXBhcnRtZW50IGZyb20gIkAvYXBpL2RlcGFydG1lbnQiOwppbXBvcnQgY2xlcmsgZnJvbSAiQC9hcGkvY2xlcmsiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF0dGVuZGFuY2U6IHsKICAgICAgICBjbGVya0lkOiAnJywKICAgICAgICBkZXBhcnRtZW50SWQ6ICcnCiAgICAgIH0sCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsCiAgICAgIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwKICAgICAgZGVwYXJ0bWVudExpc3Q6IFtdLAogICAgICBpbWFnZWNyb3BwZXJLZXk6IDAsCiAgICAgIC8v5LiK5Lyg57uE5Lu255qEa2V55YC8CiAgICAgIGNsZXJrTGlzdDogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICB3YXRjaDogewogICAgLy/nm5HlkKwKICAgICRyb3V0ZTogZnVuY3Rpb24gJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIC8v6Lev55Sx5Y+R55Sf5Y+Y5YyWIOaWueazleWwseS8muaJp+ihjAogICAgICB0aGlzLmluaXQoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRDbGVyazogZnVuY3Rpb24gaW5pdENsZXJrKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY2xlcmsuZ2V0Q2xlcmtMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5jbGVya0xpc3QgPSByZXNwb25zZS5kYXRhLmNsZXJrTGlzdDsKICAgICAgfSk7CiAgICB9LAogICAgc2VsZWN0Q2xlcms6IGZ1bmN0aW9uIHNlbGVjdENsZXJrKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYXR0ZW5kYW5jZS5jbGVya0lkID0gJyc7CiAgICAgIGNsZXJrLmdldENsZXJrQnlEZXBhcnRtZW50SWQodGhpcy5hdHRlbmRhbmNlLmRlcGFydG1lbnRJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuY2xlcmtMaXN0ID0gcmVzcG9uc2UuZGF0YS5jbGVya0xpc3Q7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Yid5aeL5YyWCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICAvL+WIpOaWrei3r+W+hOS4reaYr+WQpuaciWlk5YC8CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIHRoaXMuZ2V0QXR0ZW5kYW5jZUJ5SWQoaWQpOwogICAgICAgIHRoaXMuaW5pdENsZXJrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/muIXnqbrooajljZUKICAgICAgICB0aGlzLmF0dGVuZGFuY2UgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0RGVwYXJ0bWVudCgpOwogICAgfSwKICAgIC8v5p+l6K+i6YOo6ZeoCiAgICBpbml0RGVwYXJ0bWVudDogZnVuY3Rpb24gaW5pdERlcGFydG1lbnQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgZGVwYXJ0bWVudC5nZXREZXBhcnRtZW50TGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLmRlcGFydG1lbnRMaXN0ID0gcmVzcG9uc2UuZGF0YS5kZXBhcnRtZW50TGlzdDsKICAgICAgfSk7CiAgICB9LAogICAgLy/kv67mlLkKICAgIHVwZGF0ZUF0dGVuZGFuY2U6IGZ1bmN0aW9uIHVwZGF0ZUF0dGVuZGFuY2UoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgYXR0ZW5kYW5jZS51cGRhdGVBdHRlbmRhbmNlKHRoaXMuYXR0ZW5kYW5jZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyEiCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzNC4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi9hdHRlbmRhbmNlIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrmlk5p+l6K+iCiAgICBnZXRBdHRlbmRhbmNlQnlJZDogZnVuY3Rpb24gZ2V0QXR0ZW5kYW5jZUJ5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBhdHRlbmRhbmNlLmdldEF0dGVuZGFuY2VCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNS5hdHRlbmRhbmNlID0gcmVzcG9uc2UuZGF0YS5hdHRlbmRhbmNlOwogICAgICAgIGNvbnNvbGUubG9nKF90aGlzNS5hdHRlbmRhbmNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7fSk7CiAgICB9LAogICAgc2F2ZU9yVXBkYXRlOiBmdW5jdGlvbiBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIC8v5Yik5pat5piv5L+u5pS56L+Y5piv5re75YqgCiAgICAgIC8v5Yik5pat6Lev5b6E5Lit5piv5ZCm5pyJaWQKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICAvL+S/ruaUuQogICAgICAgIHRoaXMudXBkYXRlQXR0ZW5kYW5jZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5re75YqgCiAgICAgICAgdGhpcy5zYXZlQXR0ZW5kYW5jZSgpOwogICAgICB9CiAgICB9LAogICAgLy/mt7vliqAKICAgIHNhdmVBdHRlbmRhbmNlOiBmdW5jdGlvbiBzYXZlQXR0ZW5kYW5jZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBhdHRlbmRhbmNlLmFkZEF0dGVuZGFuY2UodGhpcy5hdHRlbmRhbmNlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8v5re75Yqg5oiQ5YqfCiAgICAgICAgLy/mj5DnpLrkv6Hmga8KICAgICAgICBfdGhpczYuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIua3u+WKoOaIkOWKnyIKICAgICAgICB9KTsgLy/lm57liLDliJfooagg6Lev55Sx6Lez6L2sKOmHjeWumuWQkSkKCgogICAgICAgIF90aGlzNi4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi9hdHRlbmRhbmNlIgogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsvL+aPkOekuuS/oeaBrwogICAgICAgIC8vIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIC8vICAgdHlwZTogIndhcm5pbmciLAogICAgICAgIC8vICAgbWVzc2FnZTogIua3u+WKoOWksei0pSIsCiAgICAgICAgLy8gfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["saveAttendance.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"120px\">\n      <el-form-item label=\"编号\">\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"attendance.id\" />\n      </el-form-item>\n      <el-form-item label=\"选择员工\">\n        <el-select\n          v-model=\"attendance.departmentId\"\n          clearable\n          placeholder=\"请选择部门\"\n          @change=\"selectClerk\"\n        >\n          <el-option\n            v-for=\"item in departmentList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n        <el-select\n          v-model=\"attendance.clerkId\"\n          clearable\n          placeholder=\"请选择员工\"\n        >\n          <el-option\n            v-for=\"item in clerkList\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"请选择时间\">\n        <el-date-picker\n          v-model=\"attendance.time\"\n          type=\"date\"\n          placeholder=\"请选择时间\"\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\n        >\n        </el-date-picker>\n      </el-form-item>\n      \n      <el-form-item label=\"考勤类型\">\n        <el-radio v-model=\"attendance.status\" label=\"1\">事假</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"2\">迟到</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"3\">早退</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"4\">病假</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"5\">旷工</el-radio>\n        <el-radio v-model=\"attendance.status\" label=\"6\">休补</el-radio>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button\n          :disabled=\"saveBtnDisabled\"\n          type=\"primary\"\n          @click=\"saveOrUpdate\"\n          >保存</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport attendance from \"@/api/attendance\";\nimport department from \"@/api/department\";\nimport clerk from \"@/api/clerk\";\nexport default {\n  data() {\n    return {\n      attendance: {\n        clerkId:'',\n        departmentId:''\n      },\n      saveBtnDisabled: false, // 保存按钮是否禁用,\n      departmentList: [],\n      imagecropperKey: 0, //上传组件的key值\n      clerkList: [],\n    };\n  },\n  created() {\n    this.init();\n  },\n  watch: {\n    //监听\n    $route(to, from) {\n      //路由发生变化 方法就会执行\n      this.init();\n    },\n  },\n  methods: {\n    initClerk() {\n      clerk.getClerkList().then((response) => {\n        this.clerkList = response.data.clerkList;\n      });\n    },\n    selectClerk() {\n      this.attendance.clerkId = '';\n      clerk\n        .getClerkByDepartmentId(this.attendance.departmentId)\n        .then((response) => {\n          this.clerkList = response.data.clerkList;\n        });\n    },\n    //初始化\n    init() {\n      //判断路径中是否有id值\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id;\n        this.getAttendanceById(id);\n        this.initClerk();\n      } else {\n        //清空表单\n        this.attendance = {};\n      }\n      this.initDepartment();\n    },\n    //查询部门\n    initDepartment() {\n      department.getDepartmentList().then((response) => {\n        this.departmentList = response.data.departmentList;\n      });\n      \n    },\n    //修改\n    updateAttendance() {\n      attendance\n        .updateAttendance(this.attendance)\n        .then((response) => {\n          this.$message({\n            type: \"success\",\n            message: \"修改成功!\",\n          });\n          this.$router.push({\n            path: \"/attendance\",\n          });\n        });\n    },\n    //根据id查询\n    getAttendanceById(id) {\n      attendance\n        .getAttendanceById(id)\n        .then((response) => {\n          this.attendance = response.data.attendance;\n          console.log(this.attendance);\n        })\n        .catch((error) => {});\n    },\n    saveOrUpdate() {\n      //判断是修改还是添加\n      //判断路径中是否有id\n      if (this.$route.params && this.$route.params.id) {\n        //修改\n        this.updateAttendance();\n      } else {\n        //添加\n        this.saveAttendance();\n      }\n    },\n    //添加\n    saveAttendance() {\n      attendance\n        .addAttendance(this.attendance)\n        .then((response) => {\n          //添加成功\n          //提示信息\n          this.$message({\n            type: \"success\",\n            message: \"添加成功\",\n          });\n          //回到列表 路由跳转(重定向)\n          this.$router.push({\n            path: \"/attendance\",\n          });\n        })\n        .catch((error) => {\n          //提示信息\n          // this.$message({\n          //   type: \"warning\",\n          //   message: \"添加失败\",\n          // });\n        });\n    },\n  },\n};\n</script>\n\n"],"sourceRoot":"src/views/attendance"}]}